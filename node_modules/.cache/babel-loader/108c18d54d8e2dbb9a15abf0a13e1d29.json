{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"C:/Users/thomas/Desktop/projet info/projet-rc1/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/thomas/Desktop/projet info/projet-rc1/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nexports.parse = function (source, transform) {\n  return new ArrayParser(source, transform).parse();\n};\n\nvar ArrayParser = /*#__PURE__*/function () {\n  function ArrayParser(source, transform) {\n    _classCallCheck(this, ArrayParser);\n\n    this.source = source;\n    this.transform = transform || identity;\n    this.position = 0;\n    this.entries = [];\n    this.recorded = [];\n    this.dimension = 0;\n  }\n\n  _createClass(ArrayParser, [{\n    key: \"isEof\",\n    value: function isEof() {\n      return this.position >= this.source.length;\n    }\n  }, {\n    key: \"nextCharacter\",\n    value: function nextCharacter() {\n      var character = this.source[this.position++];\n\n      if (character === '\\\\') {\n        return {\n          value: this.source[this.position++],\n          escaped: true\n        };\n      }\n\n      return {\n        value: character,\n        escaped: false\n      };\n    }\n  }, {\n    key: \"record\",\n    value: function record(character) {\n      this.recorded.push(character);\n    }\n  }, {\n    key: \"newEntry\",\n    value: function newEntry(includeEmpty) {\n      var entry;\n\n      if (this.recorded.length > 0 || includeEmpty) {\n        entry = this.recorded.join('');\n\n        if (entry === 'NULL' && !includeEmpty) {\n          entry = null;\n        }\n\n        if (entry !== null) entry = this.transform(entry);\n        this.entries.push(entry);\n        this.recorded = [];\n      }\n    }\n  }, {\n    key: \"consumeDimensions\",\n    value: function consumeDimensions() {\n      if (this.source[0] === '[') {\n        while (!this.isEof()) {\n          var char = this.nextCharacter();\n          if (char.value === '=') break;\n        }\n      }\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(nested) {\n      var character, parser, quote;\n      this.consumeDimensions();\n\n      while (!this.isEof()) {\n        character = this.nextCharacter();\n\n        if (character.value === '{' && !quote) {\n          this.dimension++;\n\n          if (this.dimension > 1) {\n            parser = new ArrayParser(this.source.substr(this.position - 1), this.transform);\n            this.entries.push(parser.parse(true));\n            this.position += parser.position - 2;\n          }\n        } else if (character.value === '}' && !quote) {\n          this.dimension--;\n\n          if (!this.dimension) {\n            this.newEntry();\n            if (nested) return this.entries;\n          }\n        } else if (character.value === '\"' && !character.escaped) {\n          if (quote) this.newEntry(true);\n          quote = !quote;\n        } else if (character.value === ',' && !quote) {\n          this.newEntry();\n        } else {\n          this.record(character.value);\n        }\n      }\n\n      if (this.dimension !== 0) {\n        throw new Error('array dimension not balanced');\n      }\n\n      return this.entries;\n    }\n  }]);\n\n  return ArrayParser;\n}();\n\nfunction identity(value) {\n  return value;\n}","map":{"version":3,"names":["exports","parse","source","transform","ArrayParser","identity","position","entries","recorded","dimension","length","character","value","escaped","push","includeEmpty","entry","join","isEof","char","nextCharacter","nested","parser","quote","consumeDimensions","substr","newEntry","record","Error"],"sources":["C:/Users/thomas/Desktop/projet info/projet-rc1/node_modules/postgres-array/index.js"],"sourcesContent":["'use strict'\n\nexports.parse = function (source, transform) {\n  return new ArrayParser(source, transform).parse()\n}\n\nclass ArrayParser {\n  constructor (source, transform) {\n    this.source = source\n    this.transform = transform || identity\n    this.position = 0\n    this.entries = []\n    this.recorded = []\n    this.dimension = 0\n  }\n\n  isEof () {\n    return this.position >= this.source.length\n  }\n\n  nextCharacter () {\n    var character = this.source[this.position++]\n    if (character === '\\\\') {\n      return {\n        value: this.source[this.position++],\n        escaped: true\n      }\n    }\n    return {\n      value: character,\n      escaped: false\n    }\n  }\n\n  record (character) {\n    this.recorded.push(character)\n  }\n\n  newEntry (includeEmpty) {\n    var entry\n    if (this.recorded.length > 0 || includeEmpty) {\n      entry = this.recorded.join('')\n      if (entry === 'NULL' && !includeEmpty) {\n        entry = null\n      }\n      if (entry !== null) entry = this.transform(entry)\n      this.entries.push(entry)\n      this.recorded = []\n    }\n  }\n\n  consumeDimensions () {\n    if (this.source[0] === '[') {\n      while (!this.isEof()) {\n        var char = this.nextCharacter()\n        if (char.value === '=') break\n      }\n    }\n  }\n\n  parse (nested) {\n    var character, parser, quote\n    this.consumeDimensions()\n    while (!this.isEof()) {\n      character = this.nextCharacter()\n      if (character.value === '{' && !quote) {\n        this.dimension++\n        if (this.dimension > 1) {\n          parser = new ArrayParser(this.source.substr(this.position - 1), this.transform)\n          this.entries.push(parser.parse(true))\n          this.position += parser.position - 2\n        }\n      } else if (character.value === '}' && !quote) {\n        this.dimension--\n        if (!this.dimension) {\n          this.newEntry()\n          if (nested) return this.entries\n        }\n      } else if (character.value === '\"' && !character.escaped) {\n        if (quote) this.newEntry(true)\n        quote = !quote\n      } else if (character.value === ',' && !quote) {\n        this.newEntry()\n      } else {\n        this.record(character.value)\n      }\n    }\n    if (this.dimension !== 0) {\n      throw new Error('array dimension not balanced')\n    }\n    return this.entries\n  }\n}\n\nfunction identity (value) {\n  return value\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}