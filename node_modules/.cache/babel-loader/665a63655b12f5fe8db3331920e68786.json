{"ast":null,"code":"import _classCallCheck from \"C:/Users/thomas/Desktop/projet info/projet-rc1/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/thomas/Desktop/projet info/projet-rc1/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport * as t from \"leaflet\";\n\nfunction e() {\n  return e = Object.assign ? Object.assign.bind() : function (t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var r = arguments[e];\n\n      for (var n in r) {\n        Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);\n      }\n    }\n\n    return t;\n  }, e.apply(this, arguments);\n}\n\nfunction r(t, e) {\n  t.prototype = Object.create(e.prototype), t.prototype.constructor = t, n(t, e);\n}\n\nfunction n(t, e) {\n  return n = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, n(t, e);\n}\n\nfunction o() {\n  if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n  if (Reflect.construct.sham) return !1;\n  if (\"function\" == typeof Proxy) return !0;\n\n  try {\n    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})), !0;\n  } catch (t) {\n    return !1;\n  }\n}\n\nfunction i(t, e, r) {\n  return i = o() ? Reflect.construct.bind() : function (t, e, r) {\n    var o = [null];\n    o.push.apply(o, e);\n    var i = new (Function.bind.apply(t, o))();\n    return r && n(i, r.prototype), i;\n  }, i.apply(null, arguments);\n}\n\nfunction s(t, e, r, n) {\n  void 0 === e && (e = \"\"), void 0 === n && (n = {});\n  var o = document.createElement(t);\n  return e && (o.className = e), Object.keys(n).forEach(function (t) {\n    if (\"function\" == typeof n[t]) {\n      var e = 0 === t.indexOf(\"on\") ? t.substr(2).toLowerCase() : t;\n      o.addEventListener(e, n[t]);\n    } else \"html\" === t ? o.innerHTML = n[t] : \"text\" === t ? o.innerText = n[t] : o.setAttribute(t, n[t]);\n  }), r && r.appendChild(o), o;\n}\n\nfunction a(t) {\n  t.preventDefault(), t.stopPropagation();\n}\n\nvar l = function l() {\n  return [].slice.call(arguments).filter(Boolean).join(\" \").trim();\n};\n\nfunction c(t, e) {\n  t && t.classList && (Array.isArray(e) ? e : [e]).forEach(function (e) {\n    t.classList.contains(e) || t.classList.add(e);\n  });\n}\n\nfunction u(t, e) {\n  t && t.classList && (Array.isArray(e) ? e : [e]).forEach(function (e) {\n    t.classList.contains(e) && t.classList.remove(e);\n  });\n}\n\nvar h,\n    p = 13,\n    d = 40,\n    f = 38,\n    m = [p, 27, d, f, 37, 39],\n    v = /*#__PURE__*/function () {\n  function t(t) {\n    var e = this,\n        r = t.handleSubmit,\n        n = t.searchLabel,\n        o = t.classNames,\n        i = void 0 === o ? {} : o;\n    this.container = void 0, this.form = void 0, this.input = void 0, this.handleSubmit = void 0, this.hasError = !1, this.container = s(\"div\", l(\"geosearch\", i.container)), this.form = s(\"form\", [\"\", i.form].join(\" \"), this.container, {\n      autocomplete: \"none\",\n      onClick: a,\n      onDblClick: a,\n      touchStart: a,\n      touchEnd: a\n    }), this.input = s(\"input\", [\"glass\", i.input].join(\" \"), this.form, {\n      type: \"text\",\n      placeholder: n || \"search\",\n      onInput: this.onInput,\n      onKeyUp: function onKeyUp(t) {\n        return e.onKeyUp(t);\n      },\n      onKeyPress: function onKeyPress(t) {\n        return e.onKeyPress(t);\n      },\n      onFocus: this.onFocus,\n      onBlur: this.onBlur,\n      onClick: function onClick() {\n        e.input.focus(), e.input.dispatchEvent(new Event(\"focus\"));\n      }\n    }), this.handleSubmit = r;\n  }\n\n  var e = t.prototype;\n  return e.onFocus = function () {\n    c(this.form, \"active\");\n  }, e.onBlur = function () {\n    u(this.form, \"active\");\n  }, e.onSubmit = function (t) {\n    try {\n      var e = this;\n      return a(t), u(r = e.container, \"error\"), c(r, \"pending\"), Promise.resolve(e.handleSubmit({\n        query: e.input.value\n      })).then(function () {\n        u(e.container, \"pending\");\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n\n    var r;\n  }, e.onInput = function () {\n    this.hasError && (u(this.container, \"error\"), this.hasError = !1);\n  }, e.onKeyUp = function (t) {\n    27 === t.keyCode && (u(this.container, [\"pending\", \"active\"]), this.input.value = \"\", document.body.focus(), document.body.blur());\n  }, e.onKeyPress = function (t) {\n    t.keyCode === p && this.onSubmit(t);\n  }, e.setQuery = function (t) {\n    this.input.value = t;\n  }, t;\n}(),\n    g = /*#__PURE__*/function () {\n  function t(t) {\n    var e = this,\n        r = t.handleClick,\n        n = t.classNames,\n        o = void 0 === n ? {} : n,\n        i = t.notFoundMessage;\n    this.handleClick = void 0, this.selected = -1, this.results = [], this.container = void 0, this.resultItem = void 0, this.notFoundMessage = void 0, this.onClick = function (t) {\n      if (\"function\" == typeof e.handleClick) {\n        var r = t.target;\n\n        if (r && e.container.contains(r) && r.hasAttribute(\"data-key\")) {\n          var n = Number(r.getAttribute(\"data-key\"));\n          e.clear(), e.handleClick({\n            result: e.results[n]\n          });\n        }\n      }\n    }, this.handleClick = r, this.notFoundMessage = i ? s(\"div\", l(o.notfound), void 0, {\n      html: i\n    }) : void 0, this.container = s(\"div\", l(\"results\", o.resultlist)), this.container.addEventListener(\"click\", this.onClick, !0), this.resultItem = s(\"div\", l(o.item));\n  }\n\n  var e = t.prototype;\n  return e.render = function (t, e) {\n    var r = this;\n    void 0 === t && (t = []), this.clear(), t.forEach(function (t, n) {\n      var o = r.resultItem.cloneNode(!0);\n      o.setAttribute(\"data-key\", \"\" + n), o.innerHTML = e({\n        result: t\n      }), r.container.appendChild(o);\n    }), t.length > 0 ? (c(this.container.parentElement, \"open\"), c(this.container, \"active\")) : this.notFoundMessage && (this.container.appendChild(this.notFoundMessage), c(this.container.parentElement, \"open\")), this.results = t;\n  }, e.select = function (t) {\n    return Array.from(this.container.children).forEach(function (e, r) {\n      return r === t ? c(e, \"active\") : u(e, \"active\");\n    }), this.selected = t, this.results[t];\n  }, e.count = function () {\n    return this.results ? this.results.length : 0;\n  }, e.clear = function () {\n    for (this.selected = -1; this.container.lastChild;) {\n      this.container.removeChild(this.container.lastChild);\n    }\n\n    u(this.container.parentElement, \"open\"), u(this.container, \"active\");\n  }, t;\n}(),\n    y = {\n  position: \"topleft\",\n  style: \"button\",\n  showMarker: !0,\n  showPopup: !1,\n  popupFormat: function popupFormat(t) {\n    return \"\" + t.result.label;\n  },\n  resultFormat: function resultFormat(t) {\n    return \"\" + t.result.label;\n  },\n  marker: {\n    icon: t && t.Icon ? new t.Icon.Default() : void 0,\n    draggable: !1\n  },\n  maxMarkers: 1,\n  maxSuggestions: 5,\n  retainZoomLevel: !1,\n  animateZoom: !0,\n  searchLabel: \"Enter address\",\n  clearSearchLabel: \"Clear search\",\n  notFoundMessage: \"\",\n  messageHideDelay: 3e3,\n  zoomLevel: 18,\n  classNames: {\n    container: \"leaflet-bar leaflet-control leaflet-control-geosearch\",\n    button: \"leaflet-bar-part leaflet-bar-part-single\",\n    resetButton: \"reset\",\n    msgbox: \"leaflet-bar message\",\n    form: \"\",\n    input: \"\",\n    resultlist: \"\",\n    item: \"\",\n    notfound: \"leaflet-bar-notfound\"\n  },\n  autoComplete: !0,\n  autoCompleteDelay: 250,\n  autoClose: !1,\n  keepResult: !1,\n  updateMap: !0\n},\n    b = \"Leaflet must be loaded before instantiating the GeoSearch control\",\n    E = {\n  options: e({}, y),\n  classNames: e({}, y.classNames),\n  initialize: function initialize(r) {\n    var n,\n        o,\n        i,\n        a,\n        l = this;\n    if (!t) throw new Error(b);\n    if (!r.provider) throw new Error(\"Provider is missing from options\");\n    this.options = e({}, y, r), this.classNames = e({}, this.classNames, r.classNames), this.markers = new t.FeatureGroup(), this.classNames.container += \" leaflet-geosearch-\" + this.options.style, this.searchElement = new v({\n      searchLabel: this.options.searchLabel,\n      classNames: {\n        container: this.classNames.container,\n        form: this.classNames.form,\n        input: this.classNames.input\n      },\n      handleSubmit: function handleSubmit(t) {\n        return l.onSubmit(t);\n      }\n    }), this.button = s(\"a\", this.classNames.button, this.searchElement.container, {\n      title: this.options.searchLabel,\n      href: \"#\",\n      onClick: function onClick(t) {\n        return l.onClick(t);\n      }\n    }), t.DomEvent.disableClickPropagation(this.button), this.resetButton = s(\"button\", this.classNames.resetButton, this.searchElement.form, {\n      text: \"Ã—\",\n      \"aria-label\": this.options.clearSearchLabel,\n      onClick: function onClick() {\n        \"\" === l.searchElement.input.value ? l.close() : l.clearResults(null, !0);\n      }\n    }), t.DomEvent.disableClickPropagation(this.resetButton), this.options.autoComplete && (this.resultList = new g({\n      handleClick: function handleClick(t) {\n        var e = t.result;\n        l.searchElement.input.value = e.label, l.onSubmit({\n          query: e.label,\n          data: e\n        });\n      },\n      classNames: {\n        resultlist: this.classNames.resultlist,\n        item: this.classNames.item,\n        notfound: this.classNames.notfound\n      },\n      notFoundMessage: this.options.notFoundMessage\n    }), this.searchElement.form.appendChild(this.resultList.container), this.searchElement.input.addEventListener(\"keyup\", (n = function n(t) {\n      return l.autoSearch(t);\n    }, void 0 === (o = this.options.autoCompleteDelay) && (o = 250), void 0 === i && (i = !1), function () {\n      var t = [].slice.call(arguments);\n      a && clearTimeout(a), a = setTimeout(function () {\n        a = null, i || n.apply(void 0, t);\n      }, o), i && !a && n.apply(void 0, t);\n    }), !0), this.searchElement.input.addEventListener(\"keydown\", function (t) {\n      return l.selectResult(t);\n    }, !0), this.searchElement.input.addEventListener(\"keydown\", function (t) {\n      return l.clearResults(t, !0);\n    }, !0)), this.searchElement.form.addEventListener(\"click\", function (t) {\n      t.preventDefault();\n    }, !1);\n  },\n  onAdd: function onAdd(e) {\n    var r = this.options,\n        n = r.showMarker,\n        o = r.style;\n\n    if (this.map = e, n && this.markers.addTo(e), \"bar\" === o) {\n      var i = e.getContainer().querySelector(\".leaflet-control-container\");\n      this.container = s(\"div\", \"leaflet-control-geosearch leaflet-geosearch-bar\"), this.container.appendChild(this.searchElement.form), i.appendChild(this.container);\n    }\n\n    return t.DomEvent.disableClickPropagation(this.searchElement.form), this.searchElement.container;\n  },\n  onRemove: function onRemove() {\n    var t;\n    return null == (t = this.container) || t.remove(), this;\n  },\n  open: function open() {\n    var t = this.searchElement,\n        e = t.input;\n    c(t.container, \"active\"), e.focus();\n  },\n  close: function close() {\n    u(this.searchElement.container, \"active\"), this.clearResults();\n  },\n  onClick: function onClick(t) {\n    t.preventDefault(), t.stopPropagation(), this.searchElement.container.classList.contains(\"active\") ? this.close() : this.open();\n  },\n  selectResult: function selectResult(t) {\n    if (-1 !== [p, d, f].indexOf(t.keyCode)) if (t.preventDefault(), t.keyCode !== p) {\n      var e = this.resultList.count() - 1;\n\n      if (!(e < 0)) {\n        var r = this.resultList.selected,\n            n = t.keyCode === d ? r + 1 : r - 1,\n            o = this.resultList.select(n < 0 ? e : n > e ? 0 : n);\n        this.searchElement.input.value = o.label;\n      }\n    } else {\n      var i = this.resultList.select(this.resultList.selected);\n      this.onSubmit({\n        query: this.searchElement.input.value,\n        data: i\n      });\n    }\n  },\n  clearResults: function clearResults(t, e) {\n    if (void 0 === e && (e = !1), !t || 27 === t.keyCode) {\n      var r = this.options,\n          n = r.autoComplete;\n      !e && r.keepResult || (this.searchElement.input.value = \"\", this.markers.clearLayers()), n && this.resultList.clear();\n    }\n  },\n  autoSearch: function autoSearch(t) {\n    try {\n      var e = this;\n      if (m.indexOf(t.keyCode) > -1) return Promise.resolve();\n\n      var r = t.target.value,\n          n = e.options.provider,\n          o = function () {\n        if (r.length) return Promise.resolve(n.search({\n          query: r\n        })).then(function (t) {\n          t = t.slice(0, e.options.maxSuggestions), e.resultList.render(t, e.options.resultFormat);\n        });\n        e.resultList.clear();\n      }();\n\n      return Promise.resolve(o && o.then ? o.then(function () {}) : void 0);\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  },\n  onSubmit: function onSubmit(t) {\n    try {\n      var e = this;\n      return Promise.resolve(e.options.provider.search(t)).then(function (r) {\n        r && r.length > 0 && e.showResult(r[0], t);\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  },\n  showResult: function showResult(t, e) {\n    var r = this.options,\n        n = r.autoClose,\n        o = r.updateMap,\n        i = this.markers.getLayers();\n    i.length >= this.options.maxMarkers && this.markers.removeLayer(i[0]);\n    var s = this.addMarker(t, e);\n    o && this.centerMap(t), this.map.fireEvent(\"geosearch/showlocation\", {\n      location: t,\n      marker: s\n    }), n && this.closeResults();\n  },\n  closeResults: function closeResults() {\n    var t = this.searchElement.container;\n    t.classList.contains(\"active\") && u(t, \"active\"), this.clearResults();\n  },\n  addMarker: function addMarker(e, r) {\n    var n = this,\n        o = this.options,\n        i = o.marker,\n        s = o.showPopup,\n        a = o.popupFormat,\n        l = new t.Marker([e.y, e.x], i),\n        c = e.label;\n    return \"function\" == typeof a && (c = a({\n      query: r,\n      result: e\n    })), l.bindPopup(c), this.markers.addLayer(l), s && l.openPopup(), i.draggable && l.on(\"dragend\", function (t) {\n      n.map.fireEvent(\"geosearch/marker/dragend\", {\n        location: l.getLatLng(),\n        event: t\n      });\n    }), l;\n  },\n  centerMap: function centerMap(e) {\n    var r = this.options,\n        n = r.retainZoomLevel,\n        o = r.animateZoom,\n        i = e.bounds ? new t.LatLngBounds(e.bounds) : new t.LatLng(e.y, e.x).toBounds(10),\n        s = i.isValid() ? i : this.markers.getBounds();\n    !n && i.isValid() && !e.bounds || n || !i.isValid() ? this.map.setView(s.getCenter(), this.getZoom(), {\n      animate: o\n    }) : this.map.fitBounds(s, {\n      animate: o\n    });\n  },\n  getZoom: function getZoom() {\n    var t = this.options,\n        e = t.zoomLevel;\n    return t.retainZoomLevel ? this.map.getZoom() : e;\n  }\n};\n\nfunction w() {\n  if (!t) throw new Error(b);\n  var e = t.Control.extend(E);\n  return i(e, [].slice.call(arguments));\n}\n\n!function (t) {\n  t[t.SEARCH = 0] = \"SEARCH\", t[t.REVERSE = 1] = \"REVERSE\";\n}(h || (h = {}));\n\nvar k,\n    L = /*#__PURE__*/function () {\n  function t(t) {\n    void 0 === t && (t = {}), this.options = void 0, this.options = t;\n  }\n\n  var r = t.prototype;\n  return r.getParamString = function (t) {\n    void 0 === t && (t = {});\n    var r = e({}, this.options.params, t);\n    return Object.keys(r).map(function (t) {\n      return encodeURIComponent(t) + \"=\" + encodeURIComponent(r[t]);\n    }).join(\"&\");\n  }, r.getUrl = function (t, e) {\n    return t + \"?\" + this.getParamString(e);\n  }, r.search = function (t) {\n    try {\n      var e = this,\n          r = e.endpoint({\n        query: t.query,\n        type: h.SEARCH\n      });\n      return Promise.resolve(fetch(r)).then(function (t) {\n        return Promise.resolve(t.json()).then(function (t) {\n          return e.parse({\n            data: t\n          });\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, t;\n}(),\n    C = /*#__PURE__*/function (t) {\n  function n() {\n    return t.apply(this, arguments) || this;\n  }\n\n  r(n, t);\n  var o = n.prototype;\n  return o.endpoint = function () {\n    return \"https://places-dsn.algolia.net/1/places/query\";\n  }, o.findBestMatchLevelIndex = function (t) {\n    var e = t.find(function (t) {\n      return \"full\" === t.matchLevel;\n    }) || t.find(function (t) {\n      return \"partial\" === t.matchLevel;\n    });\n    return e ? t.indexOf(e) : 0;\n  }, o.getLabel = function (t) {\n    var e, r, n, o;\n    return [null == (e = t.locale_names) ? void 0 : e.default[this.findBestMatchLevelIndex(t._highlightResult.locale_names.default)], null == (r = t.city) ? void 0 : r.default[this.findBestMatchLevelIndex(t._highlightResult.city.default)], t.administrative[this.findBestMatchLevelIndex(t._highlightResult.administrative)], null == (n = t.postcode) ? void 0 : n[this.findBestMatchLevelIndex(t._highlightResult.postcode)], null == (o = t.country) ? void 0 : o.default].filter(Boolean).join(\", \");\n  }, o.parse = function (t) {\n    var e = this;\n    return t.data.hits.map(function (t) {\n      return {\n        x: t._geoloc.lng,\n        y: t._geoloc.lat,\n        label: e.getLabel(t),\n        bounds: null,\n        raw: t\n      };\n    });\n  }, o.search = function (t) {\n    var r = t.query;\n\n    try {\n      var n = this,\n          o = \"string\" == typeof r ? {\n        query: r\n      } : r;\n      return Promise.resolve(fetch(n.endpoint(), {\n        method: \"POST\",\n        body: JSON.stringify(e({}, n.options.params, o))\n      })).then(function (t) {\n        return Promise.resolve(t.json()).then(function (t) {\n          return n.parse({\n            data: t\n          });\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, n;\n}(L),\n    x = /*#__PURE__*/function (t) {\n  function e() {\n    for (var e, r = arguments.length, n = new Array(r), o = 0; o < r; o++) {\n      n[o] = arguments[o];\n    }\n\n    return (e = t.call.apply(t, [this].concat(n)) || this).searchUrl = \"https://dev.virtualearth.net/REST/v1/Locations\", e;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    var e = t.query,\n        r = \"string\" == typeof e ? {\n      q: e\n    } : e;\n    return r.jsonp = t.jsonp, this.getUrl(this.searchUrl, r);\n  }, n.parse = function (t) {\n    return 0 === t.data.resourceSets.length ? [] : t.data.resourceSets[0].resources.map(function (t) {\n      return {\n        x: t.point.coordinates[1],\n        y: t.point.coordinates[0],\n        label: t.address.formattedAddress,\n        bounds: [[t.bbox[0], t.bbox[1]], [t.bbox[2], t.bbox[3]]],\n        raw: t\n      };\n    });\n  }, n.search = function (t) {\n    var e,\n        r,\n        n,\n        o = t.query;\n\n    try {\n      var i = this,\n          a = \"BING_JSONP_CB_\" + Date.now();\n      return Promise.resolve((e = i.endpoint({\n        query: o,\n        jsonp: a\n      }), r = a, n = s(\"script\", null, document.body), n.setAttribute(\"type\", \"text/javascript\"), new Promise(function (t) {\n        window[r] = function (e) {\n          n.remove(), delete window[r], t(e);\n        }, n.setAttribute(\"src\", e);\n      }))).then(function (t) {\n        return i.parse({\n          data: t\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, e;\n}(L),\n    S = /*#__PURE__*/function (t) {\n  function e() {\n    for (var e, r = arguments.length, n = new Array(r), o = 0; o < r; o++) {\n      n[o] = arguments[o];\n    }\n\n    return (e = t.call.apply(t, [this].concat(n)) || this).searchUrl = \"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find\", e;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    var e = t.query,\n        r = \"string\" == typeof e ? {\n      text: e\n    } : e;\n    return r.f = \"json\", this.getUrl(this.searchUrl, r);\n  }, n.parse = function (t) {\n    return t.data.locations.map(function (t) {\n      return {\n        x: t.feature.geometry.x,\n        y: t.feature.geometry.y,\n        label: t.name,\n        bounds: [[t.extent.ymin, t.extent.xmin], [t.extent.ymax, t.extent.xmax]],\n        raw: t\n      };\n    });\n  }, e;\n}(L),\n    U = /*#__PURE__*/function (t) {\n  function e(e) {\n    var r;\n    return void 0 === e && (e = {}), (r = t.call(this, e) || this).host = void 0, r.host = e.host || \"http://localhost:4000\", r;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    var e = t.query;\n    return t.type === h.REVERSE ? this.getUrl(this.host + \"/v1/reverse\", \"string\" == typeof e ? {} : e) : this.getUrl(this.host + \"/v1/autocomplete\", \"string\" == typeof e ? {\n      text: e\n    } : e);\n  }, n.parse = function (t) {\n    return t.data.features.map(function (t) {\n      var e = {\n        x: t.geometry.coordinates[0],\n        y: t.geometry.coordinates[1],\n        label: t.properties.label,\n        bounds: null,\n        raw: t\n      };\n      return Array.isArray(t.bbox) && 4 === t.bbox.length && (e.bounds = [[t.bbox[1], t.bbox[0]], [t.bbox[3], t.bbox[2]]]), e;\n    });\n  }, e;\n}(L),\n    P = /*#__PURE__*/function (t) {\n  function e(e) {\n    return void 0 === e && (e = {}), e.host = \"https://api.geocode.earth\", t.call(this, e) || this;\n  }\n\n  return r(e, t), e;\n}(U),\n    R = function t(e, r) {\n  if (e === r) return !0;\n\n  if (e && r && \"object\" == typeof e && \"object\" == typeof r) {\n    if (e.constructor !== r.constructor) return !1;\n    var n, o, i;\n\n    if (Array.isArray(e)) {\n      if ((n = e.length) != r.length) return !1;\n\n      for (o = n; 0 != o--;) {\n        if (!t(e[o], r[o])) return !1;\n      }\n\n      return !0;\n    }\n\n    if (e.constructor === RegExp) return e.source === r.source && e.flags === r.flags;\n    if (e.valueOf !== Object.prototype.valueOf) return e.valueOf() === r.valueOf();\n    if (e.toString !== Object.prototype.toString) return e.toString() === r.toString();\n    if ((n = (i = Object.keys(e)).length) !== Object.keys(r).length) return !1;\n\n    for (o = n; 0 != o--;) {\n      if (!Object.prototype.hasOwnProperty.call(r, i[o])) return !1;\n    }\n\n    for (o = n; 0 != o--;) {\n      var s = i[o];\n      if (!t(e[s], r[s])) return !1;\n    }\n\n    return !0;\n  }\n\n  return e != e && r != r;\n};\n\n!function (t) {\n  t[t.INITIALIZED = 0] = \"INITIALIZED\", t[t.LOADING = 1] = \"LOADING\", t[t.SUCCESS = 2] = \"SUCCESS\", t[t.FAILURE = 3] = \"FAILURE\";\n}(k || (k = {}));\n\nvar I = /*#__PURE__*/function () {\n  function I(_ref) {\n    var t = _ref.apiKey,\n        e = _ref.authReferrerPolicy,\n        r = _ref.channel,\n        n = _ref.client,\n        _ref$id = _ref.id,\n        o = _ref$id === void 0 ? \"__googleMapsScriptId\" : _ref$id,\n        i = _ref.language,\n        _ref$libraries = _ref.libraries,\n        s = _ref$libraries === void 0 ? [] : _ref$libraries,\n        a = _ref.mapIds,\n        l = _ref.nonce,\n        c = _ref.region,\n        _ref$retries = _ref.retries,\n        u = _ref$retries === void 0 ? 3 : _ref$retries,\n        _ref$url = _ref.url,\n        h = _ref$url === void 0 ? \"https://maps.googleapis.com/maps/api/js\" : _ref$url,\n        p = _ref.version;\n\n    _classCallCheck(this, I);\n\n    if (this.CALLBACK = \"__googleMapsCallback\", this.callbacks = [], this.done = !1, this.loading = !1, this.errors = [], this.apiKey = t, this.authReferrerPolicy = e, this.channel = r, this.client = n, this.id = o || \"__googleMapsScriptId\", this.language = i, this.libraries = s, this.mapIds = a, this.nonce = l, this.region = c, this.retries = u, this.url = h, this.version = p, I.instance) {\n      if (!R(this.options, I.instance.options)) throw new Error(\"Loader must not be called again with different options. \".concat(JSON.stringify(this.options), \" !== \").concat(JSON.stringify(I.instance.options)));\n      return I.instance;\n    }\n\n    I.instance = this;\n  }\n\n  _createClass(I, [{\n    key: \"options\",\n    get: function get() {\n      return {\n        version: this.version,\n        apiKey: this.apiKey,\n        channel: this.channel,\n        client: this.client,\n        id: this.id,\n        libraries: this.libraries,\n        language: this.language,\n        region: this.region,\n        mapIds: this.mapIds,\n        nonce: this.nonce,\n        url: this.url,\n        authReferrerPolicy: this.authReferrerPolicy\n      };\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return this.errors.length ? k.FAILURE : this.done ? k.SUCCESS : this.loading ? k.LOADING : k.INITIALIZED;\n    }\n  }, {\n    key: \"failed\",\n    get: function get() {\n      return this.done && !this.loading && this.errors.length >= this.retries + 1;\n    }\n  }, {\n    key: \"createUrl\",\n    value: function createUrl() {\n      var t = this.url;\n      return t += \"?callback=\".concat(this.CALLBACK), this.apiKey && (t += \"&key=\".concat(this.apiKey)), this.channel && (t += \"&channel=\".concat(this.channel)), this.client && (t += \"&client=\".concat(this.client)), this.libraries.length > 0 && (t += \"&libraries=\".concat(this.libraries.join(\",\"))), this.language && (t += \"&language=\".concat(this.language)), this.region && (t += \"&region=\".concat(this.region)), this.version && (t += \"&v=\".concat(this.version)), this.mapIds && (t += \"&map_ids=\".concat(this.mapIds.join(\",\"))), this.authReferrerPolicy && (t += \"&auth_referrer_policy=\".concat(this.authReferrerPolicy)), t;\n    }\n  }, {\n    key: \"deleteScript\",\n    value: function deleteScript() {\n      var t = document.getElementById(this.id);\n      t && t.remove();\n    }\n  }, {\n    key: \"load\",\n    value: function load() {\n      return this.loadPromise();\n    }\n  }, {\n    key: \"loadPromise\",\n    value: function loadPromise() {\n      var _this = this;\n\n      return new Promise(function (t, e) {\n        _this.loadCallback(function (r) {\n          r ? e(r.error) : t(window.google);\n        });\n      });\n    }\n  }, {\n    key: \"loadCallback\",\n    value: function loadCallback(t) {\n      this.callbacks.push(t), this.execute();\n    }\n  }, {\n    key: \"setScript\",\n    value: function setScript() {\n      if (document.getElementById(this.id)) return void this.callback();\n      var t = this.createUrl(),\n          e = document.createElement(\"script\");\n      e.id = this.id, e.type = \"text/javascript\", e.src = t, e.onerror = this.loadErrorCallback.bind(this), e.defer = !0, e.async = !0, this.nonce && (e.nonce = this.nonce), document.head.appendChild(e);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.deleteScript(), this.done = !1, this.loading = !1, this.errors = [], this.onerrorEvent = null;\n    }\n  }, {\n    key: \"resetIfRetryingFailed\",\n    value: function resetIfRetryingFailed() {\n      this.failed && this.reset();\n    }\n  }, {\n    key: \"loadErrorCallback\",\n    value: function loadErrorCallback(t) {\n      var _this2 = this;\n\n      if (this.errors.push(t), this.errors.length <= this.retries) {\n        var _t = this.errors.length * Math.pow(2, this.errors.length);\n\n        console.log(\"Failed to load Google Maps script, retrying in \".concat(_t, \" ms.\")), setTimeout(function () {\n          _this2.deleteScript(), _this2.setScript();\n        }, _t);\n      } else this.onerrorEvent = t, this.callback();\n    }\n  }, {\n    key: \"setCallback\",\n    value: function setCallback() {\n      window.__googleMapsCallback = this.callback.bind(this);\n    }\n  }, {\n    key: \"callback\",\n    value: function callback() {\n      var _this3 = this;\n\n      this.done = !0, this.loading = !1, this.callbacks.forEach(function (t) {\n        t(_this3.onerrorEvent);\n      }), this.callbacks = [];\n    }\n  }, {\n    key: \"execute\",\n    value: function execute() {\n      if (this.resetIfRetryingFailed(), this.done) this.callback();else {\n        if (window.google && window.google.maps && window.google.maps.version) return console.warn(\"Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match.\"), void this.callback();\n        this.loading || (this.loading = !0, this.setCallback(), this.setScript());\n      }\n    }\n  }]);\n\n  return I;\n}();\n\nvar j = /*#__PURE__*/function (t) {\n  function e(e) {\n    var r;\n    return (r = t.call(this, e) || this).loader = null, r.geocoder = null, \"undefined\" != typeof window && (r.loader = new I(e).load().then(function (t) {\n      var e = new t.maps.Geocoder();\n      return r.geocoder = e, e;\n    })), r;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    throw new Error(\"Method not implemented.\");\n  }, n.parse = function (t) {\n    return t.data.results.map(function (t) {\n      var e = t.geometry.location.toJSON(),\n          r = e.lat,\n          n = e.lng,\n          o = t.geometry.viewport.toJSON();\n      return {\n        x: n,\n        y: r,\n        label: t.formatted_address,\n        bounds: [[o.south, o.west], [o.north, o.east]],\n        raw: t\n      };\n    });\n  }, n.search = function (t) {\n    try {\n      var e = function e(_e) {\n        if (!_e) throw new Error(\"GoogleMaps GeoCoder is not loaded. Are you trying to run this server side?\");\n        return Promise.resolve(_e.geocode({\n          address: t.query\n        }, function (t) {\n          return {\n            results: t\n          };\n        }).catch(function (t) {\n          return \"ZERO_RESULTS\" !== t.code && console.error(t.code + \": \" + t.message), {\n            results: []\n          };\n        })).then(function (t) {\n          return r.parse({\n            data: t\n          });\n        });\n      },\n          r = this,\n          n = r.geocoder;\n\n      return Promise.resolve(n ? e(n) : Promise.resolve(r.loader).then(e));\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, e;\n}(L),\n    A = /*#__PURE__*/function (t) {\n  function e() {\n    for (var e, r = arguments.length, n = new Array(r), o = 0; o < r; o++) {\n      n[o] = arguments[o];\n    }\n\n    return (e = t.call.apply(t, [this].concat(n)) || this).searchUrl = \"https://maps.googleapis.com/maps/api/geocode/json\", e;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    var e = t.query;\n    return this.getUrl(this.searchUrl, \"string\" == typeof e ? {\n      address: e\n    } : e);\n  }, n.parse = function (t) {\n    return t.data.results.map(function (t) {\n      return {\n        x: t.geometry.location.lng,\n        y: t.geometry.location.lat,\n        label: t.formatted_address,\n        bounds: [[t.geometry.viewport.southwest.lat, t.geometry.viewport.southwest.lng], [t.geometry.viewport.northeast.lat, t.geometry.viewport.northeast.lng]],\n        raw: t\n      };\n    });\n  }, e;\n}(L),\n    N = /*#__PURE__*/function (t) {\n  function e() {\n    for (var e, r = arguments.length, n = new Array(r), o = 0; o < r; o++) {\n      n[o] = arguments[o];\n    }\n\n    return (e = t.call.apply(t, [this].concat(n)) || this).searchUrl = \"https://geocode.search.hereapi.com/v1/autosuggest\", e;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    var e = t.query;\n    return this.getUrl(this.searchUrl, \"string\" == typeof e ? {\n      q: e\n    } : e);\n  }, n.parse = function (t) {\n    return t.data.items.filter(function (t) {\n      return void 0 !== t.position;\n    }).map(function (t) {\n      return {\n        x: t.position.lng,\n        y: t.position.lat,\n        label: t.address.label,\n        bounds: null,\n        raw: t\n      };\n    });\n  }, e;\n}(L),\n    O = /*#__PURE__*/function (t) {\n  function e(e) {\n    var r;\n    void 0 === e && (e = {}), (r = t.call(this, e) || this).searchUrl = void 0, r.reverseUrl = void 0;\n    var n = \"https://nominatim.openstreetmap.org\";\n    return r.searchUrl = e.searchUrl || n + \"/search\", r.reverseUrl = e.reverseUrl || n + \"/reverse\", r;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    var e = t.query,\n        r = t.type,\n        n = \"string\" == typeof e ? {\n      q: e\n    } : e;\n    return n.format = \"json\", this.getUrl(r === h.REVERSE ? this.reverseUrl : this.searchUrl, n);\n  }, n.parse = function (t) {\n    return (Array.isArray(t.data) ? t.data : [t.data]).map(function (t) {\n      return {\n        x: Number(t.lon),\n        y: Number(t.lat),\n        label: t.display_name,\n        bounds: [[parseFloat(t.boundingbox[0]), parseFloat(t.boundingbox[2])], [parseFloat(t.boundingbox[1]), parseFloat(t.boundingbox[3])]],\n        raw: t\n      };\n    });\n  }, e;\n}(L),\n    M = /*#__PURE__*/function (t) {\n  function n(r) {\n    return t.call(this, e({}, r, {\n      searchUrl: \"https://locationiq.org/v1/search.php\",\n      reverseUrl: \"https://locationiq.org/v1/reverse.php\"\n    })) || this;\n  }\n\n  return r(n, t), n;\n}(O),\n    _ = /*#__PURE__*/function (t) {\n  function e() {\n    for (var e, r = arguments.length, n = new Array(r), o = 0; o < r; o++) {\n      n[o] = arguments[o];\n    }\n\n    return (e = t.call.apply(t, [this].concat(n)) || this).searchUrl = \"https://api.opencagedata.com/geocode/v1/json\", e;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    var e = t.query,\n        r = \"string\" == typeof e ? {\n      q: e\n    } : e;\n    return r.format = \"json\", this.getUrl(this.searchUrl, r);\n  }, n.parse = function (t) {\n    return t.data.results.map(function (t) {\n      return {\n        x: t.geometry.lng,\n        y: t.geometry.lat,\n        label: t.formatted,\n        bounds: [[t.bounds.southwest.lat, t.bounds.southwest.lng], [t.bounds.northeast.lat, t.bounds.northeast.lng]],\n        raw: t\n      };\n    });\n  }, n.search = function (e) {\n    try {\n      return Promise.resolve(e.query.length < 2 ? [] : t.prototype.search.call(this, e));\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, e;\n}(L),\n    q = /*#__PURE__*/function (t) {\n  function e(e) {\n    var r;\n    return void 0 === e && (e = {}), (r = t.call(this, e) || this).searchUrl = void 0, r.searchUrl = e.searchUrl || \"https://a.tiles.mapbox.com/v4/geocode/mapbox.places/\", r;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    return this.getUrl(\"\" + this.searchUrl + t.query + \".json\");\n  }, n.parse = function (t) {\n    return (Array.isArray(t.data.features) ? t.data.features : []).map(function (t) {\n      var e = null;\n      return t.bbox && (e = [[parseFloat(t.bbox[1]), parseFloat(t.bbox[0])], [parseFloat(t.bbox[3]), parseFloat(t.bbox[2])]]), {\n        x: Number(t.center[0]),\n        y: Number(t.center[1]),\n        label: t.place_name ? t.place_name : t.text,\n        bounds: e,\n        raw: t\n      };\n    });\n  }, e;\n}(L),\n    F = /*#__PURE__*/function (t) {\n  function e(e) {\n    var r;\n    void 0 === e && (e = {}), (r = t.call(this, e) || this).searchUrl = void 0, r.reverseUrl = void 0;\n    var n = \"https://api-adresse.data.gouv.fr\";\n    return r.searchUrl = e.searchUrl || n + \"/search\", r.reverseUrl = e.reverseUrl || n + \"/reverse\", r;\n  }\n\n  r(e, t);\n  var n = e.prototype;\n  return n.endpoint = function (t) {\n    var e = t.query;\n    return this.getUrl(t.type === h.REVERSE ? this.reverseUrl : this.searchUrl, \"string\" == typeof e ? {\n      q: e\n    } : e);\n  }, n.parse = function (t) {\n    return t.data.features.map(function (t) {\n      return {\n        x: t.geometry.coordinates[0],\n        y: t.geometry.coordinates[1],\n        label: t.properties.label,\n        bounds: null,\n        raw: t\n      };\n    });\n  }, e;\n}(L);\n\nexport { C as AlgoliaProvider, x as BingProvider, S as EsriProvider, F as GeoApiFrProvider, w as GeoSearchControl, P as GeocodeEarthProvider, j as GoogleProvider, N as HereProvider, L as JsonProvider, A as LegacyGoogleProvider, M as LocationIQProvider, q as MapBoxProvider, _ as OpenCageProvider, O as OpenStreetMapProvider, U as PeliasProvider, w as SearchControl, v as SearchElement };","map":{"version":3,"mappings":"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","names":["element","className","parent","attributes","document","createElement","el","Object","keys","forEach","key","type","indexOf","substr","toLowerCase","addEventListener","innerHTML","innerText","setAttribute","appendChild","stopPropagation","event","preventDefault","l","filter","Boolean","join","trim","classList","Array","isArray","name","contains","add","removeClassName","remove","ARROW_DOWN_KEY","ARROW_UP_KEY","SPECIAL_KEYS","ENTER_KEY","SearchElement","_ref","handleSubmit","searchLabel","classNames","_ref$classNames","o","container","form","this","input","hasError","cx","autocomplete","onClick","onDblClick","touchStart","touchEnd","placeholder","onInput","onKeyUp","e","onKeyPress","_this","onFocus","onBlur","focus","dispatchEvent","addClassName","onSubmit","_this3","Promise","query","value","keyCode","body","blur","setQuery","t","ResultList","handleClick","notFoundMessage","selected","results","resultItem","target","hasAttribute","idx","Number","getAttribute","clear","result","notfound","undefined","html","resultlist","item","render","resultFormat","child","_this2","cloneNode","length","parentElement","select","index","from","children","count","lastChild","removeChild","defaultOptions","position","style","showMarker","showPopup","popupFormat","label","_ref2","marker","icon","L","Icon","Default","draggable","maxMarkers","maxSuggestions","retainZoomLevel","animateZoom","clearSearchLabel","messageHideDelay","zoomLevel","button","resetButton","msgbox","autoComplete","autoCompleteDelay","autoClose","keepResult","updateMap","UNINITIALIZED_ERR","E","options","initialize","cb","wait","immediate","timeout","provider","Error","_extends","markers","FeatureGroup","searchElement","title","href","DomEvent","disableClickPropagation","text","close","clearResults","resultList","_ref3","data","autoSearch","clearTimeout","setTimeout","apply","args","selectResult","onAdd","map","_this$options","addTo","root","getContainer","querySelector","onRemove","_this$container","open","_this$searchElement","max","next","force","_this$options2","clearLayers","_temp2","search","slice","_this5","showResult","_this$options3","getLayers","removeLayer","addMarker","centerMap","fireEvent","location","closeResults","_this$options4","Marker","y","x","popupLabel","bindPopup","addLayer","openPopup","on","_this6","getLatLng","_this$options5","bounds","LatLngBounds","LatLng","toBounds","resultBounds","isValid","getBounds","setView","getCenter","getZoom","animate","fitBounds","_this$options6","LControl","Control","extend","RequestType","AbstractProvider","LoaderStatus","getParamString","params","set","encodeURIComponent","r","getUrl","url","endpoint","SEARCH","fetch","request","json","parse","C","findBestMatchLevelIndex","vms","find","vm","matchLevel","match","getLabel","locale_names","_result$locale_names","default","_highlightResult","city","_result$city","administrative","postcode","_result$postcode","_result$country","country","response","hits","_geoloc","lng","lat","raw","method","JSON","stringify","searchUrl","q","jsonp","resourceSets","resources","point","coordinates","address","formattedAddress","bbox","script","Date","now","createScriptElement","resolve","window","then","EsriProvider","f","locations","feature","geometry","extent","ymin","xmin","ymax","xmax","PeliasProvider","host","_inheritsLoose","_AbstractProvider","REVERSE","reverseParams","n","features","res","properties","_PeliasProvider","fastDeepEqual","equal","a","b","constructor","i","RegExp","source","flags","valueOf","prototype","toString","hasOwnProperty","call","INITIALIZED","LOADING","SUCCESS","FAILURE","Loader","version","apiKey","authReferrerPolicy","channel","client","id","language","libraries","mapIds","nonce","region","retries","CALLBACK","callbacks","done","loading","errors","instance","status","failed","createUrl","deleteScript","getElementById","load","loadPromise","reject","loadCallback","err","error","google","fn","push","execute","setScript","callback","src","onerror","loadErrorCallback","bind","defer","async","head","reset","onerrorEvent","resetIfRetryingFailed","delay","Math","pow","console","log","setCallback","__googleMapsCallback","maps","warn","GoogleProvider","loader","geocoder","Geocoder","toJSON","_r$geometry$location$","_r$geometry$viewport$","viewport","formatted_address","south","west","north","east","geocode","catch","code","message","southwest","northeast","items","reverseUrl","format","lon","display_name","parseFloat","boundingbox","OpenStreetMapProvider","formatted","center","place_name"],"sources":["../src/domUtils.ts","../src/constants.ts","../src/SearchElement.ts","../src/resultList.ts","../src/SearchControl.ts","../src/lib/debounce.ts","../src/providers/provider.ts","../node_modules/@googlemaps/js-api-loader/dist/index.esm.js","../src/providers/algoliaProvider.ts","../src/providers/bingProvider.ts","../src/providers/esriProvider.ts","../src/providers/peliasProvider.ts","../src/providers/geocodeEarthProvider.ts","../src/providers/googleProvider.ts","../src/providers/legacyGoogleProvider.ts","../src/providers/hereProvider.ts","../src/providers/openStreetMapProvider.ts","../src/providers/locationIQProvider.ts","../src/providers/openCageProvider.ts","../src/providers/mapBoxProvider.ts","../src/providers/geoApiFrProvider.ts"],"sourcesContent":["export function createElement<T extends HTMLElement = HTMLElement>(\n  element: string,\n  className: string | null = '',\n  parent?: Element | null,\n  attributes: { [key: string]: string | ((event: any) => void) } = {},\n): T {\n  const el = document.createElement(element) as T;\n\n  if (className) {\n    el.className = className;\n  }\n\n  Object.keys(attributes).forEach((key) => {\n    if (typeof attributes[key] === 'function') {\n      // IE doesn't support startsWith\n      const type = (\n        key.indexOf('on') === 0 ? key.substr(2).toLowerCase() : key\n      ) as keyof HTMLElementEventMap;\n      el.addEventListener(type, attributes[key] as () => void);\n    } else if (key === 'html') {\n      el.innerHTML = attributes[key] as string;\n    } else if (key === 'text') {\n      el.innerText = attributes[key] as string;\n    } else {\n      el.setAttribute(key, attributes[key] as string);\n    }\n  });\n\n  if (parent) {\n    parent.appendChild(el);\n  }\n\n  return el;\n}\n\nexport function stopPropagation(event: Event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nexport function createScriptElement<T = object>(\n  url: string,\n  cb: string,\n): Promise<T> {\n  const script = createElement('script', null, document.body);\n  script.setAttribute('type', 'text/javascript');\n\n  return new Promise((resolve) => {\n    (window as any)[cb] = (json: T): void => {\n      script.remove();\n      delete (window as any)[cb];\n      resolve(json);\n    };\n\n    script.setAttribute('src', url);\n  });\n}\n\nexport const cx = (...classNames: (string | undefined)[]): string =>\n  classNames.filter(Boolean).join(' ').trim();\n\nexport function addClassName(\n  element: Element | null,\n  className: string | string[],\n): void {\n  if (!element || !element.classList) {\n    return;\n  }\n\n  // IE doesn't support adding multiple classes at once :(\n  const classNames = Array.isArray(className) ? className : [className];\n  classNames.forEach((name) => {\n    if (!element.classList.contains(name)) {\n      element.classList.add(name);\n    }\n  });\n}\n\nexport function removeClassName(\n  element: Element | null,\n  className: string | string[],\n): void {\n  if (!element || !element.classList) {\n    return;\n  }\n\n  // IE doesn't support removing multiple classes at once :(\n  const classNames = Array.isArray(className) ? className : [className];\n  classNames.forEach((name) => {\n    if (element.classList.contains(name)) {\n      element.classList.remove(name);\n    }\n  });\n}\n\nexport function replaceClassName(\n  element: Element,\n  find: string,\n  replace: string,\n): void {\n  removeClassName(element, find);\n  addClassName(element, replace);\n}\n","export const ENTER_KEY = 13;\nexport const ESCAPE_KEY = 27;\nexport const ARROW_DOWN_KEY = 40;\nexport const ARROW_UP_KEY = 38;\nexport const ARROW_LEFT_KEY = 37;\nexport const ARROW_RIGHT_KEY = 39;\n\nexport const SPECIAL_KEYS = [\n  ENTER_KEY,\n  ESCAPE_KEY,\n  ARROW_DOWN_KEY,\n  ARROW_UP_KEY,\n  ARROW_LEFT_KEY,\n  ARROW_RIGHT_KEY,\n];\n","import {\n  createElement,\n  addClassName,\n  removeClassName,\n  cx,\n  stopPropagation,\n  replaceClassName,\n} from './domUtils';\n\nimport { ESCAPE_KEY, ENTER_KEY } from './constants';\n\ninterface SearchElementProps {\n  searchLabel?: string;\n  handleSubmit: (args: { query: string }) => void;\n  classNames?: {\n    container?: string;\n    form?: string;\n    input?: string;\n  };\n}\n\nexport default class SearchElement {\n  container: HTMLDivElement;\n  form: HTMLFormElement;\n  input: HTMLInputElement;\n  handleSubmit: (args: { query: string }) => void;\n  hasError = false;\n\n  constructor({\n    handleSubmit,\n    searchLabel,\n    classNames = {},\n  }: SearchElementProps) {\n    this.container = createElement<HTMLDivElement>(\n      'div',\n      cx('geosearch', classNames.container),\n    );\n\n    this.form = createElement<HTMLFormElement>(\n      'form',\n      ['', classNames.form].join(' '),\n      this.container,\n      {\n        autocomplete: 'none',\n        onClick: stopPropagation,\n        onDblClick: stopPropagation,\n        touchStart: stopPropagation,\n        touchEnd: stopPropagation,\n      },\n    );\n\n    this.input = createElement<HTMLInputElement>(\n      'input',\n      ['glass', classNames.input].join(' '),\n      this.form,\n      {\n        type: 'text',\n        placeholder: searchLabel || 'search',\n        onInput: this.onInput,\n        onKeyUp: (e) => this.onKeyUp(e),\n        onKeyPress: (e) => this.onKeyPress(e),\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n\n        // For some reason, leaflet is blocking the 'touchstart', manually give\n        // focus to the input onClick\n        // > Ignored attempt to cancel a touchstart event with cancelable=false,\n        // > for example because scrolling is in progress and cannot be interrupted.\n        onClick: () => {\n          this.input.focus();\n          this.input.dispatchEvent(new Event('focus'));\n        },\n      },\n    );\n\n    this.handleSubmit = handleSubmit;\n  }\n\n  onFocus(): void {\n    addClassName(this.form, 'active');\n  }\n\n  onBlur(): void {\n    removeClassName(this.form, 'active');\n  }\n\n  async onSubmit(event: Event): Promise<void> {\n    stopPropagation(event);\n    replaceClassName(this.container, 'error', 'pending');\n\n    await this.handleSubmit({ query: this.input.value });\n    removeClassName(this.container, 'pending');\n  }\n\n  onInput(): void {\n    if (!this.hasError) {\n      return;\n    }\n\n    removeClassName(this.container, 'error');\n    this.hasError = false;\n  }\n\n  onKeyUp(event: KeyboardEvent): void {\n    if (event.keyCode !== ESCAPE_KEY) {\n      return;\n    }\n\n    removeClassName(this.container, ['pending', 'active']);\n\n    this.input.value = '';\n\n    document.body.focus();\n    document.body.blur();\n  }\n\n  onKeyPress(event: KeyboardEvent): void {\n    if (event.keyCode !== ENTER_KEY) {\n      return;\n    }\n\n    this.onSubmit(event);\n  }\n\n  setQuery(query: string): void {\n    this.input.value = query;\n  }\n}\n","import { createElement, addClassName, removeClassName, cx } from './domUtils';\nimport { SearchResult } from './providers/provider';\n\ninterface ResultListProps {\n  handleClick: (args: { result: SearchResult }) => void;\n  classNames?: {\n    resultlist?: string;\n    item?: string;\n    notfound?: string;\n  };\n  notFoundMessage?: string;\n}\n\nexport default class ResultList {\n  handleClick?: (args: { result: SearchResult }) => void;\n  selected = -1;\n  results: SearchResult[] = [];\n\n  container: HTMLDivElement;\n  resultItem: HTMLDivElement;\n  notFoundMessage?: HTMLDivElement;\n\n  constructor({\n    handleClick,\n    classNames = {},\n    notFoundMessage,\n  }: ResultListProps) {\n    this.handleClick = handleClick;\n    this.notFoundMessage = !!notFoundMessage\n      ? createElement<HTMLDivElement>(\n          'div',\n          cx(classNames.notfound),\n          undefined,\n          { html: notFoundMessage! },\n        )\n      : undefined;\n\n    this.container = createElement<HTMLDivElement>(\n      'div',\n      cx('results', classNames.resultlist),\n    );\n    this.container.addEventListener('click', this.onClick, true);\n\n    this.resultItem = createElement<HTMLDivElement>('div', cx(classNames.item));\n  }\n\n  render(\n    results: SearchResult[] = [],\n    resultFormat: (args: { result: SearchResult }) => string,\n  ): void {\n    this.clear();\n\n    results.forEach((result, idx) => {\n      const child = this.resultItem.cloneNode(true) as HTMLDivElement;\n      child.setAttribute('data-key', `${idx}`);\n      child.innerHTML = resultFormat({ result });\n      this.container.appendChild(child);\n    });\n\n    if (results.length > 0) {\n      addClassName(this.container.parentElement, 'open');\n      addClassName(this.container, 'active');\n    } else if (!!this.notFoundMessage) {\n      this.container.appendChild(this.notFoundMessage);\n      addClassName(this.container.parentElement, 'open');\n    }\n\n    this.results = results;\n  }\n\n  select(index: number): SearchResult {\n    // eslint-disable-next-line no-confusing-arrow\n    Array.from(this.container.children).forEach((child, idx) =>\n      idx === index\n        ? addClassName(child, 'active')\n        : removeClassName(child, 'active'),\n    );\n\n    this.selected = index;\n    return this.results[index];\n  }\n\n  count(): number {\n    return this.results ? this.results.length : 0;\n  }\n\n  clear(): void {\n    this.selected = -1;\n\n    while (this.container.lastChild) {\n      this.container.removeChild(this.container.lastChild);\n    }\n\n    removeClassName(this.container.parentElement, 'open');\n    removeClassName(this.container, 'active');\n  }\n\n  onClick = (event: Event): void => {\n    if (typeof this.handleClick !== 'function') {\n      return;\n    }\n\n    const target = event.target as HTMLDivElement;\n    if (\n      !target ||\n      !this.container.contains(target) ||\n      !target.hasAttribute('data-key')\n    ) {\n      return;\n    }\n\n    const idx = Number(target.getAttribute('data-key'));\n    this.clear();\n    this.handleClick({ result: this.results[idx] });\n  };\n}\n","import * as L from 'leaflet';\nimport { ControlPosition, FeatureGroup, MarkerOptions, Map } from 'leaflet';\nimport SearchElement from './SearchElement';\nimport ResultList from './resultList';\nimport debounce from './lib/debounce';\n\nimport {\n  createElement,\n  addClassName,\n  removeClassName,\n  stopPropagation,\n} from './domUtils';\nimport {\n  ENTER_KEY,\n  SPECIAL_KEYS,\n  ARROW_UP_KEY,\n  ARROW_DOWN_KEY,\n  ESCAPE_KEY,\n} from './constants';\nimport AbstractProvider, { SearchResult } from './providers/provider';\nimport { Provider } from './providers';\n\nconst defaultOptions: Omit<SearchControlProps, 'provider'> = {\n  position: 'topleft',\n  style: 'button',\n  showMarker: true,\n  showPopup: false,\n  popupFormat: ({ result }) => `${result.label}`,\n  resultFormat: ({ result }) => `${result.label}`,\n  marker: {\n    icon: L && L.Icon ? new L.Icon.Default() : undefined,\n    draggable: false,\n  },\n  maxMarkers: 1,\n  maxSuggestions: 5,\n  retainZoomLevel: false,\n  animateZoom: true,\n  searchLabel: 'Enter address',\n  clearSearchLabel: 'Clear search',\n  notFoundMessage: '',\n  messageHideDelay: 3000,\n  zoomLevel: 18,\n  classNames: {\n    container: 'leaflet-bar leaflet-control leaflet-control-geosearch',\n    button: 'leaflet-bar-part leaflet-bar-part-single',\n    resetButton: 'reset',\n    msgbox: 'leaflet-bar message',\n    form: '',\n    input: '',\n    resultlist: '',\n    item: '',\n    notfound: 'leaflet-bar-notfound',\n  },\n  autoComplete: true,\n  autoCompleteDelay: 250,\n  autoClose: false,\n  keepResult: false,\n  updateMap: true,\n};\n\nconst UNINITIALIZED_ERR =\n  'Leaflet must be loaded before instantiating the GeoSearch control';\n\ninterface SearchControlProps {\n  /** the provider to use for searching */\n  provider: Provider;\n  /** the leaflet position to render the element in */\n  position: ControlPosition;\n  /**\n   * the stye of the search element\n   * @default bar\n   **/\n  style: 'button' | 'bar';\n\n  marker: MarkerOptions;\n  maxMarkers: number;\n  showMarker: boolean;\n  showPopup: boolean;\n  popupFormat<T = any>(args: {\n    query: Selection;\n    result: SearchResult<T>;\n  }): string;\n\n  resultFormat<T = any>(args: { result: SearchResult<T> }): string;\n\n  searchLabel: string;\n  clearSearchLabel: string;\n  notFoundMessage: string;\n  messageHideDelay: number;\n\n  animateZoom: boolean;\n  zoomLevel: number;\n  retainZoomLevel: boolean;\n\n  classNames: {\n    container: string;\n    button: string;\n    resetButton: string;\n    msgbox: string;\n    form: string;\n    input: string;\n    resultlist: string;\n    item: string;\n    notfound: string;\n  };\n\n  autoComplete: boolean;\n  autoCompleteDelay: number;\n  maxSuggestions: number;\n  autoClose: boolean;\n  keepResult: boolean;\n  updateMap: boolean;\n}\n\nexport type SearchControlOptions = Partial<SearchControlProps> & {\n  provider: Provider;\n};\n\ninterface Selection {\n  query: string;\n  data?: SearchResult;\n}\n\ninterface SearchControl {\n  options: Omit<SearchControlProps, 'provider'> & {\n    provider?: SearchControlProps['provider'];\n  };\n  markers: FeatureGroup;\n  searchElement: SearchElement;\n  resultList: ResultList;\n  classNames: SearchControlProps['classNames'];\n  container: HTMLDivElement;\n  input: HTMLInputElement;\n  button: HTMLAnchorElement;\n  resetButton: HTMLAnchorElement;\n  map: Map;\n\n  // [key: string]: any;\n  initialize(options: SearchControlProps): void;\n  onSubmit(result: Selection): void;\n  open(): void;\n  close(): void;\n  onClick(event: Event): void;\n  clearResults(event?: KeyboardEvent | null, force?: boolean): void;\n  autoSearch(event: KeyboardEvent): void;\n  selectResult(event: KeyboardEvent): void;\n  showResult(result: SearchResult, query: Selection): void;\n  addMarker(result: SearchResult, selection: Selection): void;\n  centerMap(result: SearchResult): void;\n  closeResults(): void;\n  getZoom(): number;\n  onAdd(map: Map): HTMLDivElement;\n  onRemove(): SearchControl;\n}\n\n// @ts-ignore\nconst Control: SearchControl = {\n  options: { ...defaultOptions },\n  classNames: { ...defaultOptions.classNames },\n\n  initialize(options: SearchControlOptions) {\n    if (!L) {\n      throw new Error(UNINITIALIZED_ERR);\n    }\n\n    if (!options.provider) {\n      throw new Error('Provider is missing from options');\n    }\n\n    // merge given options with control defaults\n    this.options = { ...defaultOptions, ...options };\n    this.classNames = { ...this.classNames, ...options.classNames };\n\n    this.markers = new L.FeatureGroup();\n    this.classNames.container += ` leaflet-geosearch-${this.options.style}`;\n\n    this.searchElement = new SearchElement({\n      searchLabel: this.options.searchLabel,\n      classNames: {\n        container: this.classNames.container,\n        form: this.classNames.form,\n        input: this.classNames.input,\n      },\n      handleSubmit: (result) => this.onSubmit(result),\n    });\n\n    this.button = createElement<HTMLAnchorElement>(\n      'a',\n      this.classNames.button,\n      this.searchElement.container,\n      {\n        title: this.options.searchLabel,\n        href: '#',\n        onClick: (e) => this.onClick(e),\n      },\n    );\n\n    L.DomEvent.disableClickPropagation(this.button);\n\n    this.resetButton = createElement<HTMLAnchorElement>(\n      'button',\n      this.classNames.resetButton,\n      this.searchElement.form,\n      {\n        text: 'Ã—',\n        'aria-label': this.options.clearSearchLabel,\n        onClick: () => {\n          if (this.searchElement.input.value === '') {\n            this.close();\n          } else {\n            this.clearResults(null, true);\n          }\n        },\n      },\n    );\n\n    L.DomEvent.disableClickPropagation(this.resetButton);\n\n    if (this.options.autoComplete) {\n      this.resultList = new ResultList({\n        handleClick: ({ result }): void => {\n          this.searchElement.input.value = result.label;\n          this.onSubmit({ query: result.label, data: result });\n        },\n        classNames: {\n          resultlist: this.classNames.resultlist,\n          item: this.classNames.item,\n          notfound: this.classNames.notfound,\n        },\n        notFoundMessage: this.options.notFoundMessage,\n      });\n\n      this.searchElement.form.appendChild(this.resultList.container);\n\n      this.searchElement.input.addEventListener(\n        'keyup',\n        debounce(\n          (e: KeyboardEvent) => this.autoSearch(e),\n          this.options.autoCompleteDelay,\n        ),\n        true,\n      );\n\n      this.searchElement.input.addEventListener(\n        'keydown',\n        (e: KeyboardEvent) => this.selectResult(e),\n        true,\n      );\n\n      this.searchElement.input.addEventListener(\n        'keydown',\n        (e: KeyboardEvent) => this.clearResults(e, true),\n        true,\n      );\n    }\n\n    this.searchElement.form.addEventListener(\n      'click',\n      (e) => {\n        e.preventDefault();\n      },\n      false,\n    );\n  },\n\n  onAdd(map: Map) {\n    const { showMarker, style } = this.options;\n\n    this.map = map;\n    if (showMarker) {\n      this.markers.addTo(map);\n    }\n\n    if (style === 'bar') {\n      const root = map\n        .getContainer()\n        .querySelector('.leaflet-control-container');\n\n      this.container = createElement<HTMLDivElement>(\n        'div',\n        'leaflet-control-geosearch leaflet-geosearch-bar',\n      );\n\n      this.container.appendChild(this.searchElement.form);\n      root!.appendChild(this.container);\n    }\n\n    L.DomEvent.disableClickPropagation(this.searchElement.form);\n    return this.searchElement.container;\n  },\n\n  onRemove() {\n    this.container?.remove();\n    return this;\n  },\n\n  open() {\n    const { container, input } = this.searchElement;\n    addClassName(container, 'active');\n    input.focus();\n  },\n\n  close() {\n    const { container } = this.searchElement;\n    removeClassName(container, 'active');\n    this.clearResults();\n  },\n\n  onClick(event: Event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const { container } = this.searchElement;\n\n    if (container.classList.contains('active')) {\n      this.close();\n    } else {\n      this.open();\n    }\n  },\n\n  selectResult(event) {\n    if (\n      [ENTER_KEY, ARROW_DOWN_KEY, ARROW_UP_KEY].indexOf(event.keyCode) === -1\n    ) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.keyCode === ENTER_KEY) {\n      const item = this.resultList.select(this.resultList.selected);\n      this.onSubmit({ query: this.searchElement.input.value, data: item });\n      return;\n    }\n\n    const max = this.resultList.count() - 1;\n    if (max < 0) {\n      return;\n    }\n\n    const { selected } = this.resultList;\n    const next = event.keyCode === ARROW_DOWN_KEY ? selected + 1 : selected - 1;\n    const idx = next < 0 ? max : next > max ? 0 : next;\n\n    const item = this.resultList.select(idx);\n    this.searchElement.input.value = item.label;\n  },\n\n  clearResults(event: KeyboardEvent | null, force = false) {\n    if (event && event.keyCode !== ESCAPE_KEY) {\n      return;\n    }\n\n    const { keepResult, autoComplete } = this.options;\n\n    if (force || !keepResult) {\n      this.searchElement.input.value = '';\n      this.markers.clearLayers();\n    }\n\n    if (autoComplete) {\n      this.resultList.clear();\n    }\n  },\n\n  async autoSearch(event) {\n    if (SPECIAL_KEYS.indexOf(event.keyCode) > -1) {\n      return;\n    }\n\n    const query = (event.target as HTMLInputElement).value;\n    const { provider } = this.options;\n\n    if (query.length) {\n      let results = await provider!.search({ query });\n      results = results.slice(0, this.options.maxSuggestions);\n      this.resultList.render(results, this.options.resultFormat);\n    } else {\n      this.resultList.clear();\n    }\n  },\n\n  async onSubmit(query) {\n    const { provider } = this.options;\n\n    const results = await provider!.search(query);\n\n    if (results && results.length > 0) {\n      this.showResult(results[0], query);\n    }\n  },\n\n  showResult(result, query) {\n    const { autoClose, updateMap } = this.options;\n\n    const markers = this.markers.getLayers();\n    if (markers.length >= this.options.maxMarkers) {\n      this.markers.removeLayer(markers[0]);\n    }\n\n    const marker = this.addMarker(result, query);\n\n    if (updateMap) {\n      this.centerMap(result);\n    }\n\n    this.map.fireEvent('geosearch/showlocation', {\n      location: result,\n      marker,\n    });\n\n    if (autoClose) {\n      this.closeResults();\n    }\n  },\n\n  closeResults() {\n    const { container } = this.searchElement;\n\n    if (container.classList.contains('active')) {\n      removeClassName(container, 'active');\n    }\n\n    this.clearResults();\n  },\n\n  addMarker(result, query) {\n    const { marker: options, showPopup, popupFormat } = this.options;\n    const marker = new L.Marker([result.y, result.x], options);\n    let popupLabel = result.label;\n\n    if (typeof popupFormat === 'function') {\n      popupLabel = popupFormat({ query, result });\n    }\n\n    marker.bindPopup(popupLabel);\n\n    this.markers.addLayer(marker);\n\n    if (showPopup) {\n      marker.openPopup();\n    }\n\n    if (options.draggable) {\n      marker.on('dragend', (args) => {\n        this.map.fireEvent('geosearch/marker/dragend', {\n          location: marker.getLatLng(),\n          event: args,\n        });\n      });\n    }\n\n    return marker;\n  },\n\n  centerMap(result) {\n    const { retainZoomLevel, animateZoom } = this.options;\n\n    const resultBounds = result.bounds\n      ? new L.LatLngBounds(result.bounds)\n      : new L.LatLng(result.y, result.x).toBounds(10);\n\n    const bounds = resultBounds.isValid()\n      ? resultBounds\n      : this.markers.getBounds();\n\n    if (!retainZoomLevel && resultBounds.isValid() && !result.bounds) {\n      this.map.setView(bounds.getCenter(), this.getZoom(), {\n        animate: animateZoom,\n      });\n    } else if (!retainZoomLevel && resultBounds.isValid()) {\n      this.map.fitBounds(bounds, { animate: animateZoom });\n    } else {\n      this.map.setView(bounds.getCenter(), this.getZoom(), {\n        animate: animateZoom,\n      });\n    }\n  },\n\n  getZoom(): number {\n    const { retainZoomLevel, zoomLevel } = this.options;\n    return retainZoomLevel ? this.map.getZoom() : zoomLevel;\n  },\n};\n\nexport default function SearchControl(...options: any[]) {\n  if (!L) {\n    throw new Error(UNINITIALIZED_ERR);\n  }\n\n  const LControl = L.Control.extend(Control);\n  return new LControl(...options);\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nexport default function debounce(\n  cb: (...args: any[]) => void,\n  wait = 250,\n  immediate = false,\n): (...args: any[]) => void {\n  let timeout: ReturnType<typeof setTimeout> | null;\n\n  return (...args: any[]): void => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = setTimeout(() => {\n      timeout = null;\n\n      if (!immediate) {\n        cb(...args);\n      }\n    }, wait);\n\n    if (immediate && !timeout) {\n      cb(...args);\n    }\n  };\n}\n","export type PointTuple = [number, number];\nexport type BoundsTuple = [PointTuple, PointTuple];\n\nexport interface LatLng {\n  lat: number;\n  lng: number;\n}\n\nexport interface SearchResult<TRawResult = any> {\n  x: number;\n  y: number;\n  label: string;\n  bounds: BoundsTuple | null;\n  raw: TRawResult;\n}\n\nexport interface ProviderParams {\n  [key: string]: string | number | boolean;\n}\n\nexport interface ProviderOptions {\n  params?: ProviderParams;\n}\n\nexport enum RequestType {\n  SEARCH,\n  REVERSE,\n}\n\nexport interface EndpointArgument {\n  query: string | { [key: string]: string | number | boolean };\n  type?: RequestType;\n}\n\nexport interface SearchArgument {\n  query: string;\n}\n\nexport interface ParseArgument<TData> {\n  data: TData;\n}\n\nexport interface Provider<TRequestResult, TRawResult> {\n  options: ProviderOptions;\n\n  endpoint(options: EndpointArgument): string;\n  getParamString(params: ProviderParams): string;\n  parse(response: ParseArgument<TRequestResult>): SearchResult<TRawResult>[];\n  search(options: SearchArgument): Promise<SearchResult<TRawResult>[]>;\n}\n\nexport default abstract class AbstractProvider<\n  TRequestResult = any,\n  TRawResult = any,\n> implements Provider<TRequestResult, TRawResult>\n{\n  options: ProviderOptions;\n\n  constructor(options: ProviderOptions = {}) {\n    this.options = options;\n  }\n\n  abstract endpoint(options: EndpointArgument): string;\n  abstract parse(\n    response: ParseArgument<TRequestResult>,\n  ): SearchResult<TRawResult>[];\n\n  getParamString(params: ProviderParams = {}): string {\n    const set = { ...this.options.params, ...params };\n    return Object.keys(set)\n      .map(\n        (key) => `${encodeURIComponent(key)}=${encodeURIComponent(set[key])}`,\n      )\n      .join('&');\n  }\n\n  getUrl(url: string, params?: ProviderParams): string {\n    return `${url}?${this.getParamString(params)}`;\n  }\n\n  async search(options: SearchArgument): Promise<SearchResult<TRawResult>[]> {\n    const url = this.endpoint({\n      query: options.query,\n      type: RequestType.SEARCH,\n    });\n\n    const request = await fetch(url);\n    const json: TRequestResult = await request.json();\n    return this.parse({ data: json });\n  }\n}\n","// do not edit .js files directly - edit src/index.jst\n\n\n\nvar fastDeepEqual = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n\n/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at.\n *\n *      Http://www.apache.org/licenses/LICENSE-2.0.\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_ID = \"__googleMapsScriptId\";\n/**\n * The status of the [[Loader]].\n */\nvar LoaderStatus;\n(function (LoaderStatus) {\n    LoaderStatus[LoaderStatus[\"INITIALIZED\"] = 0] = \"INITIALIZED\";\n    LoaderStatus[LoaderStatus[\"LOADING\"] = 1] = \"LOADING\";\n    LoaderStatus[LoaderStatus[\"SUCCESS\"] = 2] = \"SUCCESS\";\n    LoaderStatus[LoaderStatus[\"FAILURE\"] = 3] = \"FAILURE\";\n})(LoaderStatus || (LoaderStatus = {}));\n/**\n * [[Loader]] makes it easier to add Google Maps JavaScript API to your application\n * dynamically using\n * [Promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise).\n * It works by dynamically creating and appending a script node to the the\n * document head and wrapping the callback function so as to return a promise.\n *\n * ```\n * const loader = new Loader({\n *   apiKey: \"\",\n *   version: \"weekly\",\n *   libraries: [\"places\"]\n * });\n *\n * loader.load().then((google) => {\n *   const map = new google.maps.Map(...)\n * })\n * ```\n */\nclass Loader {\n    /**\n     * Creates an instance of Loader using [[LoaderOptions]]. No defaults are set\n     * using this library, instead the defaults are set by the Google Maps\n     * JavaScript API server.\n     *\n     * ```\n     * const loader = Loader({apiKey, version: 'weekly', libraries: ['places']});\n     * ```\n     */\n    constructor({ apiKey, authReferrerPolicy, channel, client, id = DEFAULT_ID, language, libraries = [], mapIds, nonce, region, retries = 3, url = \"https://maps.googleapis.com/maps/api/js\", version, }) {\n        this.CALLBACK = \"__googleMapsCallback\";\n        this.callbacks = [];\n        this.done = false;\n        this.loading = false;\n        this.errors = [];\n        this.apiKey = apiKey;\n        this.authReferrerPolicy = authReferrerPolicy;\n        this.channel = channel;\n        this.client = client;\n        this.id = id || DEFAULT_ID; // Do not allow empty string\n        this.language = language;\n        this.libraries = libraries;\n        this.mapIds = mapIds;\n        this.nonce = nonce;\n        this.region = region;\n        this.retries = retries;\n        this.url = url;\n        this.version = version;\n        if (Loader.instance) {\n            if (!fastDeepEqual(this.options, Loader.instance.options)) {\n                throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Loader.instance.options)}`);\n            }\n            return Loader.instance;\n        }\n        Loader.instance = this;\n    }\n    get options() {\n        return {\n            version: this.version,\n            apiKey: this.apiKey,\n            channel: this.channel,\n            client: this.client,\n            id: this.id,\n            libraries: this.libraries,\n            language: this.language,\n            region: this.region,\n            mapIds: this.mapIds,\n            nonce: this.nonce,\n            url: this.url,\n            authReferrerPolicy: this.authReferrerPolicy,\n        };\n    }\n    get status() {\n        if (this.errors.length) {\n            return LoaderStatus.FAILURE;\n        }\n        if (this.done) {\n            return LoaderStatus.SUCCESS;\n        }\n        if (this.loading) {\n            return LoaderStatus.LOADING;\n        }\n        return LoaderStatus.INITIALIZED;\n    }\n    get failed() {\n        return this.done && !this.loading && this.errors.length >= this.retries + 1;\n    }\n    /**\n     * CreateUrl returns the Google Maps JavaScript API script url given the [[LoaderOptions]].\n     *\n     * @ignore\n     */\n    createUrl() {\n        let url = this.url;\n        url += `?callback=${this.CALLBACK}`;\n        if (this.apiKey) {\n            url += `&key=${this.apiKey}`;\n        }\n        if (this.channel) {\n            url += `&channel=${this.channel}`;\n        }\n        if (this.client) {\n            url += `&client=${this.client}`;\n        }\n        if (this.libraries.length > 0) {\n            url += `&libraries=${this.libraries.join(\",\")}`;\n        }\n        if (this.language) {\n            url += `&language=${this.language}`;\n        }\n        if (this.region) {\n            url += `&region=${this.region}`;\n        }\n        if (this.version) {\n            url += `&v=${this.version}`;\n        }\n        if (this.mapIds) {\n            url += `&map_ids=${this.mapIds.join(\",\")}`;\n        }\n        if (this.authReferrerPolicy) {\n            url += `&auth_referrer_policy=${this.authReferrerPolicy}`;\n        }\n        return url;\n    }\n    deleteScript() {\n        const script = document.getElementById(this.id);\n        if (script) {\n            script.remove();\n        }\n    }\n    /**\n     * Load the Google Maps JavaScript API script and return a Promise.\n     */\n    load() {\n        return this.loadPromise();\n    }\n    /**\n     * Load the Google Maps JavaScript API script and return a Promise.\n     *\n     * @ignore\n     */\n    loadPromise() {\n        return new Promise((resolve, reject) => {\n            this.loadCallback((err) => {\n                if (!err) {\n                    resolve(window.google);\n                }\n                else {\n                    reject(err.error);\n                }\n            });\n        });\n    }\n    /**\n     * Load the Google Maps JavaScript API script with a callback.\n     */\n    loadCallback(fn) {\n        this.callbacks.push(fn);\n        this.execute();\n    }\n    /**\n     * Set the script on document.\n     */\n    setScript() {\n        if (document.getElementById(this.id)) {\n            // TODO wrap onerror callback for cases where the script was loaded elsewhere\n            this.callback();\n            return;\n        }\n        const url = this.createUrl();\n        const script = document.createElement(\"script\");\n        script.id = this.id;\n        script.type = \"text/javascript\";\n        script.src = url;\n        script.onerror = this.loadErrorCallback.bind(this);\n        script.defer = true;\n        script.async = true;\n        if (this.nonce) {\n            script.nonce = this.nonce;\n        }\n        document.head.appendChild(script);\n    }\n    /**\n     * Reset the loader state.\n     */\n    reset() {\n        this.deleteScript();\n        this.done = false;\n        this.loading = false;\n        this.errors = [];\n        this.onerrorEvent = null;\n    }\n    resetIfRetryingFailed() {\n        if (this.failed) {\n            this.reset();\n        }\n    }\n    loadErrorCallback(e) {\n        this.errors.push(e);\n        if (this.errors.length <= this.retries) {\n            const delay = this.errors.length * Math.pow(2, this.errors.length);\n            console.log(`Failed to load Google Maps script, retrying in ${delay} ms.`);\n            setTimeout(() => {\n                this.deleteScript();\n                this.setScript();\n            }, delay);\n        }\n        else {\n            this.onerrorEvent = e;\n            this.callback();\n        }\n    }\n    setCallback() {\n        window.__googleMapsCallback = this.callback.bind(this);\n    }\n    callback() {\n        this.done = true;\n        this.loading = false;\n        this.callbacks.forEach((cb) => {\n            cb(this.onerrorEvent);\n        });\n        this.callbacks = [];\n    }\n    execute() {\n        this.resetIfRetryingFailed();\n        if (this.done) {\n            this.callback();\n        }\n        else {\n            // short circuit and warn if google.maps is already loaded\n            if (window.google && window.google.maps && window.google.maps.version) {\n                console.warn(\"Google Maps already loaded outside @googlemaps/js-api-loader.\" +\n                    \"This may result in undesirable behavior as options and script parameters may not match.\");\n                this.callback();\n                return;\n            }\n            if (this.loading) ;\n            else {\n                this.loading = true;\n                this.setCallback();\n                this.setScript();\n            }\n        }\n    }\n}\n\nexport { DEFAULT_ID, Loader, LoaderStatus };\n//# sourceMappingURL=index.esm.js.map\n","import AbstractProvider, {\n  LatLng,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\n\ninterface RequestResult {\n  hits: RawResult[];\n}\n\ninterface ValueMatch {\n  value: string;\n  matchLevel: string;\n  matchedWords: string[];\n  fullyHighlighted?: boolean;\n}\n\ninterface RawResult {\n  country: { [key: string]: string };\n  country_code: string;\n  city: { [key: string]: string[] };\n  importance: number;\n  _tags: string[];\n  postcode: string[];\n  population: number;\n  is_country: boolean;\n  is_highway: boolean;\n  is_city: boolean;\n  is_popular: boolean;\n  administrative: string[];\n  admin_level: number;\n  is_suburb: boolean;\n  locale_names: {\n    default: string[];\n  };\n  _geoloc: LatLng;\n  objectID: string;\n  _highlightResult: {\n    country: {\n      default: ValueMatch;\n      [key: string]: ValueMatch;\n    };\n    city: {\n      default: ValueMatch[];\n      [key: string]: ValueMatch[];\n    };\n    postcode: ValueMatch[];\n    administrative: ValueMatch[];\n    locale_names: {\n      default: ValueMatch[];\n    };\n  };\n}\n\ninterface ProviderOptions {\n  key?: string;\n  [key: string]: string | boolean | number | undefined;\n}\n\nexport default class Provider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  endpoint(): string {\n    // No query, Algolia requires POST request\n    return 'https://places-dsn.algolia.net/1/places/query';\n  }\n\n  /**\n   * Find index of value with best match\n   * (full, fallback to partial, and then to 0)\n   */\n  findBestMatchLevelIndex(vms: ValueMatch[]): number {\n    const match =\n      vms.find((vm) => vm.matchLevel === 'full') ||\n      vms.find((vm) => vm.matchLevel === 'partial');\n    return match ? vms.indexOf(match) : 0;\n  }\n\n  /**\n   * Algolia not provides labels for hits, so\n   * we will implement that builder ourselves\n   */\n  getLabel(result: RawResult): string {\n    return [\n      // Building + Street\n      result.locale_names?.default[\n        this.findBestMatchLevelIndex(\n          result._highlightResult.locale_names.default,\n        )\n      ],\n      // City\n      result.city?.default[\n        this.findBestMatchLevelIndex(result._highlightResult.city.default)\n      ],\n      // Administrative (State / Province)\n      result.administrative[\n        this.findBestMatchLevelIndex(result._highlightResult.administrative)\n      ],\n      // Zip code / Postal code\n      result.postcode?.[\n        this.findBestMatchLevelIndex(result._highlightResult.postcode)\n      ],\n      // Country\n      result.country?.default,\n    ]\n      .filter(Boolean)\n      .join(', ');\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.hits.map((r) => ({\n      x: r._geoloc.lng,\n      y: r._geoloc.lat,\n      label: this.getLabel(r),\n      bounds: null, // Algolia API does not provide bounds\n      raw: r,\n    }));\n  }\n\n  async search({ query }: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    const params = typeof query === 'string' ? { query } : query;\n\n    const request = await fetch(this.endpoint(), {\n      method: 'POST',\n      body: JSON.stringify({\n        ...this.options.params,\n        ...params,\n      }),\n    });\n\n    const json = await request.json();\n    return this.parse({ data: json });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\nimport { createScriptElement } from '../domUtils';\n\nexport interface RequestResult {\n  authenticationResultCode: string;\n  brandLogoUri: string;\n  copyright: string;\n  resourceSets: {\n    estimatedTotal: number;\n    resources: RawResult[];\n  }[];\n  statusCode: number;\n  statusDescription: string;\n  traceId: string;\n}\n\nexport interface RawResult {\n  __type: string;\n  bbox: [number, number, number, number];\n  name: string;\n  point: { type: 'Point'; coordinates: [number, number] };\n  address: {\n    adminDistrict: string;\n    adminDistrict2: string;\n    countryRegion: string;\n    formattedAddress: string;\n    locality: string;\n  };\n  confidence: string;\n  entityType: string;\n  geocodePoints: [\n    {\n      type: 'Point';\n      coordinates: [number, number];\n      calculationMethod: string;\n      usageTypes: string[];\n    },\n  ];\n  matchCodes: string[];\n}\n\nexport default class BingProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://dev.virtualearth.net/REST/v1/Locations';\n\n  endpoint({ query, jsonp }: EndpointArgument & { jsonp: string }): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.jsonp = jsonp;\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    if (response.data.resourceSets.length === 0) {\n      return [];\n    }\n\n    return response.data.resourceSets[0].resources.map((r) => ({\n      x: r.point.coordinates[1],\n      y: r.point.coordinates[0],\n      label: r.address.formattedAddress,\n      bounds: [\n        [r.bbox[0], r.bbox[1]], // s, w\n        [r.bbox[2], r.bbox[3]], // n, e\n      ],\n      raw: r,\n    }));\n  }\n\n  async search({ query }: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    const jsonp = `BING_JSONP_CB_${Date.now()}`;\n    const json = await createScriptElement<RequestResult>(\n      this.endpoint({ query, jsonp }),\n      jsonp,\n    );\n\n    return this.parse({ data: json });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\ninterface RequestResult {\n  spatialReference: { wkid: number; latestWkid: number };\n  locations: RawResult[];\n}\n\ninterface RawResult {\n  name: string;\n  extent: {\n    xmin: number;\n    ymin: number;\n    xmax: number;\n    ymax: number;\n  };\n  feature: {\n    geometry: { x: number; y: number };\n    attributes: { Score: number; Addr_Type: string };\n  };\n}\n\nexport default class EsriProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl =\n    'https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find';\n\n  endpoint({ query }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { text: query } : query;\n    params.f = 'json';\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(result: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return result.data.locations.map((r) => ({\n      x: r.feature.geometry.x,\n      y: r.feature.geometry.y,\n      label: r.name,\n      bounds: [\n        [r.extent.ymin, r.extent.xmin], // s, w\n        [r.extent.ymax, r.extent.xmax], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  RequestType,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  geocoding: object;\n  features: RawResult[];\n}\n\nexport type PeliasProviderOptions = {\n  host?: string;\n} & ProviderOptions;\n\nexport interface RawResult {\n  type: 'Feature';\n  geometry: {\n    type: 'Point';\n    coordinates: [number, number];\n  };\n  bbox?: [number, number, number, number];\n  properties: {\n    id: string;\n    source_id: string;\n    gid: string;\n\n    layer: string;\n    source: string;\n\n    label: string;\n    name: string;\n\n    accuracy: 'centroid' | 'point';\n    confidence?: number;\n    match_type?: 'exact' | 'interpolated' | 'fallback';\n\n    borough?: string;\n    borough_a?: string;\n    borough_gid?: string;\n    continent?: string;\n    continent_a?: string;\n    continent_gid?: string;\n    country?: string;\n    country_a?: string;\n    country_gid?: string;\n    county?: string;\n    county_a?: string;\n    county_gid?: string;\n    dependency?: string;\n    dependency_a?: string;\n    dependency_gid?: string;\n    empire?: string;\n    empire_a?: string;\n    empire_gid?: string;\n    localadmin?: string;\n    localadmin_a?: string;\n    localadmin_gid?: string;\n    locality?: string;\n    locality_a?: string;\n    locality_gid?: string;\n    macrocounty?: string;\n    macrocounty_a?: string;\n    macrocounty_gid?: string;\n    macroregion?: string;\n    macroregion_a?: string;\n    macroregion_gid?: string;\n    marinearea?: string;\n    marinearea_a?: string;\n    marinearea_gid?: string;\n    neighbourhood?: string;\n    neighbourhood_a?: string;\n    neighbourhood_gid?: string;\n    ocean?: string;\n    ocean_a?: string;\n    ocean_gid?: string;\n    postalcode?: string;\n    postalcode_a?: string;\n    postalcode_gid?: string;\n    region?: string;\n    region_a?: string;\n    region_gid?: string;\n\n    street?: string;\n    housenumber?: string;\n\n    addendum?: any;\n  };\n}\n\nexport default class PeliasProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  // Pelias servers are self-hosted so you'll need to configure the 'options.host' string\n  // to identify where requests to your running pelias/api server instance should be sent.\n  // note: you SHOULD include the scheme, domain and port but NOT any path or parameters.\n  // If you're using the Docker setup (https://github.com/pelias/docker)\n  // then the default host of 'http://localhost:4000' will work out of the box.\n  host: string;\n\n  constructor(options: PeliasProviderOptions = {}) {\n    super(options);\n    this.host = options.host || 'http://localhost:4000';\n  }\n\n  /**\n   * note: Pelias has four different query modes:\n   * /v1/autocomplete: for partially completed inputs (such as when a user types)\n   * /v1/search: for completed inputs (such as when geocoding a CSV file)\n   * /v1/search/structured: for completed inputs with fields already separated\n   * /v1/reverse: for finding places nearby/enveloping a point\n   */\n  endpoint({ query, type }: EndpointArgument) {\n    switch (type) {\n      // case RequestType.AUTOCOMPLETE:\n      //   const autocompleteParams = (typeof query === 'string') ? { text: query } : query;\n      //   return this.getUrl(`${this.host}/v1/autocomplete`, autocompleteParams);\n\n      // case RequestType.FULLTEXT:\n      //   const searchParams = (typeof query === 'string') ? { text: query } : query;\n      //   return this.getUrl(`${this.host}/v1/search`, searchParams);\n\n      // case RequestType.STRUCTURED:\n      //   const structuredParams = (typeof query === 'string') ? { address: query } : query;\n      //   return this.getUrl(`${this.host}/v1/search/structured`, structuredParams);\n\n      case RequestType.REVERSE:\n        const reverseParams = typeof query === 'string' ? {} : query;\n        return this.getUrl(`${this.host}/v1/reverse`, reverseParams);\n\n      // note: the default query mode is set to 'autocomplete'\n      default:\n        const autocompleteParams =\n          typeof query === 'string' ? { text: query } : query;\n        return this.getUrl(`${this.host}/v1/autocomplete`, autocompleteParams);\n    }\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.features.map((feature) => {\n      const res: SearchResult<RawResult> = {\n        x: feature.geometry.coordinates[0],\n        y: feature.geometry.coordinates[1],\n        label: feature.properties.label,\n        bounds: null,\n        raw: feature,\n      };\n\n      // bbox values are only available for features derived from non-point geometries\n      // geojson bbox format: [minX, minY, maxX, maxY]\n      if (Array.isArray(feature.bbox) && feature.bbox.length === 4) {\n        res.bounds = [\n          [feature.bbox[1], feature.bbox[0]], // s, w\n          [feature.bbox[3], feature.bbox[2]], // n, e\n        ];\n      }\n\n      return res;\n    });\n  }\n}\n","import PeliasProvider, { PeliasProviderOptions } from './peliasProvider';\n\nexport default class GeocodeEarthProvider extends PeliasProvider {\n  constructor(options: PeliasProviderOptions = {}) {\n    options.host = 'https://api.geocode.earth';\n    super(options);\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  SearchArgument,\n  SearchResult,\n} from './provider';\nimport { Loader, LoaderOptions } from '@googlemaps/js-api-loader';\n\ninterface RequestResult {\n  results: google.maps.GeocoderResult[];\n  status?: google.maps.GeocoderStatus;\n}\n\ninterface GeocodeError {\n  code: Exclude<google.maps.GeocoderStatus, google.maps.GeocoderStatus.OK>;\n  endpoint: 'GEOCODER_GEOCODE';\n  message: string;\n  name: 'MapsRequestError';\n  stack: string;\n}\n\nexport type GoogleProviderOptions = LoaderOptions & ProviderOptions;\n\nexport default class GoogleProvider extends AbstractProvider<\n  RequestResult,\n  google.maps.GeocoderResult\n> {\n  loader: Promise<google.maps.Geocoder> | null = null;\n  geocoder: google.maps.Geocoder | null = null;\n\n  constructor(options: GoogleProviderOptions) {\n    super(options);\n\n    if (typeof window !== 'undefined') {\n      this.loader = new Loader(options).load().then((google) => {\n        const geocoder = new google.maps.Geocoder();\n        this.geocoder = geocoder;\n        return geocoder;\n      });\n    }\n  }\n\n  endpoint({ query }: EndpointArgument): never {\n    throw new Error('Method not implemented.');\n  }\n\n  parse(\n    response: ParseArgument<RequestResult>,\n  ): SearchResult<google.maps.GeocoderResult>[] {\n    return response.data.results.map((r) => {\n      const { lat, lng } = r.geometry.location.toJSON();\n      const { east, north, south, west } = r.geometry.viewport.toJSON();\n\n      return {\n        x: lng,\n        y: lat,\n        label: r.formatted_address,\n        bounds: [\n          [south, west],\n          [north, east],\n        ],\n        raw: r,\n      };\n    });\n  }\n\n  async search(\n    options: SearchArgument,\n  ): Promise<SearchResult<google.maps.GeocoderResult>[]> {\n    const geocoder = this.geocoder || (await this.loader);\n\n    if (!geocoder) {\n      throw new Error(\n        'GoogleMaps GeoCoder is not loaded. Are you trying to run this server side?',\n      );\n    }\n\n    const response = await geocoder\n      .geocode({ address: options.query }, (response) => ({\n        results: response,\n      }))\n      .catch((e: GeocodeError) => {\n        if (e.code !== 'ZERO_RESULTS') {\n          console.error(`${e.code}: ${e.message}`);\n        }\n        return { results: [] };\n      });\n\n    return this.parse({ data: response });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  results: RawResult[];\n  status: string;\n}\n\nexport interface RawResult {\n  address_components: {\n    long_name: string;\n    short_name: string;\n    types: string[];\n  }[];\n  formatted_address: string;\n  geometry: {\n    location: LatLng;\n    location_type: string;\n    viewport: {\n      northeast: LatLng;\n      southwest: LatLng;\n    };\n  };\n  place_id: string;\n  plus_code: {\n    compound_code: string;\n    global_code: string;\n  };\n  types: string[];\n}\n\nexport default class LegacyGoogleProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://maps.googleapis.com/maps/api/geocode/json';\n\n  endpoint({ query }: EndpointArgument) {\n    const params = typeof query === 'string' ? { address: query } : query;\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(result: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return result.data.results.map((r) => ({\n      x: r.geometry.location.lng,\n      y: r.geometry.location.lat,\n      label: r.formatted_address,\n      bounds: [\n        [r.geometry.viewport.southwest.lat, r.geometry.viewport.southwest.lng], // s, w\n        [r.geometry.viewport.northeast.lat, r.geometry.viewport.northeast.lng], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  items: RawResult[];\n}\n\nexport interface RawResult {\n  title: string;\n  id: string;\n  resultType: string;\n  address: {\n    label: string;\n    countryCode: string;\n    countryName: string;\n    state: string;\n    county: string;\n    city: string;\n    district: string;\n    street: string;\n    postalCode: string;\n    houseNumber: string;\n  };\n  position: LatLng;\n  access: LatLng[];\n  categories: { id: string }[];\n  contacts: { [key: string]: { value: string }[] }[];\n  scoring: {\n    queryScore: number;\n    fieldScore: {\n      placeName: number;\n    };\n  };\n}\n\nexport default class HereProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://geocode.search.hereapi.com/v1/autosuggest';\n\n  endpoint({ query }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.items\n      .filter((r) => r.position !== undefined)\n      .map((r) => ({\n        x: r.position.lng,\n        y: r.position.lat,\n        label: r.address.label,\n        bounds: null,\n        raw: r,\n      }));\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  RequestType,\n  SearchResult,\n} from './provider';\nimport hasShape from '../lib/hasShape';\n\nexport type RequestResult = RawResult[];\n\nexport interface RawResult {\n  place_id: string;\n  license: string;\n  osm_type: string;\n  osm_id: number;\n  boundingbox: [string, string, string, string];\n  lat: string;\n  lon: string;\n  display_name: string;\n  class: string;\n  type: string;\n  importance: number;\n  icon?: string;\n}\n\nexport type OpenStreetMapProviderOptions = {\n  searchUrl?: string;\n  reverseUrl?: string;\n} & ProviderOptions;\n\nexport default class OpenStreetMapProvider extends AbstractProvider<\n  RawResult[],\n  RawResult\n> {\n  searchUrl: string;\n  reverseUrl: string;\n\n  constructor(options: OpenStreetMapProviderOptions = {}) {\n    super(options);\n\n    const host = 'https://nominatim.openstreetmap.org';\n    this.searchUrl = options.searchUrl || `${host}/search`;\n    this.reverseUrl = options.reverseUrl || `${host}/reverse`;\n  }\n\n  endpoint({ query, type }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.format = 'json';\n\n    switch (type) {\n      case RequestType.REVERSE:\n        return this.getUrl(this.reverseUrl, params);\n\n      default:\n        return this.getUrl(this.searchUrl, params);\n    }\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    const records = Array.isArray(response.data)\n      ? response.data\n      : [response.data];\n\n    return records.map((r) => ({\n      x: Number(r.lon),\n      y: Number(r.lat),\n      label: r.display_name,\n      bounds: [\n        [parseFloat(r.boundingbox[0]), parseFloat(r.boundingbox[2])], // s, w\n        [parseFloat(r.boundingbox[1]), parseFloat(r.boundingbox[3])], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import OpenStreetMapProvider, {\n  OpenStreetMapProviderOptions,\n} from './openStreetMapProvider';\n\nexport default class LocationIQProvider extends OpenStreetMapProvider {\n  constructor(options: OpenStreetMapProviderOptions) {\n    super({\n      ...options,\n      searchUrl: `https://locationiq.org/v1/search.php`,\n      reverseUrl: `https://locationiq.org/v1/reverse.php`,\n    });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  results: RawResult[];\n}\n\nexport interface RawResult {\n  annotations: {\n    DMS: { lat: string; lng: string };\n    MGRS: string;\n    Maidenhead: string;\n    Mercator: { x: number; y: number };\n    OSM: {\n      edit_url: string;\n      note_url: string;\n      url: string;\n    };\n    UN_M49: {\n      regions: { [key: string]: string };\n      statistical_groupings: string[];\n    };\n    callingcode: number;\n    currency: {\n      alternate_symbols: string[];\n      decimal_mark: string;\n      html_entity: string;\n      iso_code: string;\n      iso_numeric: string;\n      name: string;\n      smallest_denomination: number;\n      subunit: string;\n      subunit_to_unit: number;\n      symbol: string;\n      symbol_first: number;\n      thousands_separator: string;\n    };\n    flag: string;\n    geohash: string;\n    qibla: number;\n    roadinfo: {\n      drive_on: string;\n      road: string;\n      road_type: string;\n      speed_in: string;\n    };\n    sun: {\n      rise: {\n        apparent: number;\n        astronomical: number;\n        civil: number;\n        nautical: number;\n      };\n      set: {\n        apparent: number;\n        astronomical: number;\n        civil: number;\n        nautical: number;\n      };\n    };\n    timezone: {\n      name: string;\n      now_in_dst: number;\n      offset_sec: number;\n      offset_string: string;\n      short_name: string;\n    };\n    what3words: { words: string };\n  };\n  bounds: {\n    northeast: LatLng;\n    southwest: LatLng;\n  };\n  formatted: string;\n  geometry: LatLng;\n}\n\nexport default class OpenCageProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://api.opencagedata.com/geocode/v1/json';\n\n  endpoint({ query }: EndpointArgument) {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.format = 'json';\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.results.map((r) => ({\n      x: r.geometry.lng,\n      y: r.geometry.lat,\n      label: r.formatted,\n      bounds: [\n        [r.bounds.southwest.lat, r.bounds.southwest.lng], // s, w\n        [r.bounds.northeast.lat, r.bounds.northeast.lng], // n, e\n      ],\n      raw: r,\n    }));\n  }\n\n  async search(options: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    // opencage returns a 400 error when query length < 2\n    if (options.query.length < 2) {\n      return [];\n    }\n\n    return super.search(options);\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  SearchResult,\n  BoundsTuple,\n} from './provider';\n\nexport type RequestResult = {\n  features: RawResult[];\n};\nexport interface RawResult {\n  center: [string, string];\n  text: string;\n  place_name: string;\n  bbox: [string, string, string, string];\n}\n\nexport type MapBoxProviderOptions = {\n  searchUrl?: string;\n  reverseUrl?: string;\n} & ProviderOptions;\n\nexport default class MapBoxProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl: string;\n\n  constructor(options: MapBoxProviderOptions = {}) {\n    super(options);\n\n    const host = 'https://a.tiles.mapbox.com';\n    this.searchUrl = options.searchUrl || `${host}/v4/geocode/mapbox.places/`;\n  }\n\n  endpoint({ query }: EndpointArgument): string {\n    return this.getUrl(`${this.searchUrl}${query}.json`);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    const records = Array.isArray(response.data.features)\n      ? response.data.features\n      : [];\n\n    return records.map((r) => {\n      let bounds = null;\n      if (r.bbox) {\n        bounds = [\n          [parseFloat(r.bbox[1]), parseFloat(r.bbox[0])], // s, w\n          [parseFloat(r.bbox[3]), parseFloat(r.bbox[2])], // n, e\n        ] as BoundsTuple;\n      }\n\n      return {\n        x: Number(r.center[0]),\n        y: Number(r.center[1]),\n        label: r.place_name ? r.place_name : r.text,\n        bounds,\n        raw: r,\n      };\n    });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  SearchResult,\n  RequestType,\n} from './provider';\n\nexport interface RequestResult {\n  features: RawResult[];\n  type: string;\n  version: string;\n  attribution: string;\n  licence: string;\n  query: string;\n  limit: string;\n}\n\nexport interface RawResult {\n  properties: {\n    label: string;\n    score: number;\n    importance: number;\n    x: number;\n    y: number;\n    housenumber: string;\n    id: string;\n    type: string;\n    name: string;\n    postcode: string;\n    citycode: string;\n    city: string;\n    context: string;\n    street: string;\n  };\n  type: string;\n  geometry: {\n    coordinates: number[];\n    type: string;\n  };\n}\n\nexport type GeoApiFrProviderOptions = {\n  searchUrl?: string;\n  reverseUrl?: string;\n} & ProviderOptions;\n\nexport default class GeoApiFrProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl: string;\n  reverseUrl: string;\n\n  constructor(options: GeoApiFrProviderOptions = {}) {\n    super(options);\n\n    const host = 'https://api-adresse.data.gouv.fr';\n    this.searchUrl = options.searchUrl || `${host}/search`;\n    this.reverseUrl = options.reverseUrl || `${host}/reverse`;\n  }\n\n  endpoint({ query, type }: EndpointArgument) {\n    const params = typeof query === 'string' ? { q: query } : query;\n\n    switch (type) {\n      case RequestType.REVERSE:\n        return this.getUrl(this.reverseUrl, params);\n\n      default:\n        return this.getUrl(this.searchUrl, params);\n    }\n  }\n\n  parse(result: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return result.data.features.map((r) => ({\n      x: r.geometry.coordinates[0],\n      y: r.geometry.coordinates[1],\n      label: r.properties.label,\n      bounds: null,\n      raw: r,\n    }));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}